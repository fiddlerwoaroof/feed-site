{
  "title":"How To Create Advanced Animations With CSS",
  "date":"2022-10-29T12:00:00.000000Z",
  "author":null,
  "id":"https://smashingmagazine.com/2022/10/advanced-animations-css/",
  "link":"https://smashingmagazine.com/2022/10/advanced-animations-css/",
  "content":"<p>We surf the web daily, and as developers, we tend to notice subtle details on a website. The one thing I take note of all the time is how smooth the animations on a website are. Animation is great for UX and design purposes. You can make an interactive website that pleases the visitor and makes them remember your website.</p>\n<p>Creating advanced animations sounds like a hard topic, but the good news is, in CSS, you can stack multiple simple animations after each other to create a more complex one!</p>\n<p>In this blog post, you will learn the following:</p>\n<ul>\n<li>What cubic beziers are and how they can be used to create a “complex” animation in just one line of CSS;</li>\n<li>How to stack animations after each other to create an advanced animation;</li>\n<li>How to create a rollercoaster animation by applying the two points you learned above.</li>\n</ul>\n<p><strong>Note</strong>: <em>This article assumes that you have basic knowledge of CSS animations. If you don’t, please check out <a href=\"https://www.smashingmagazine.com/2011/09/the-guide-to-css-animation-principles-and-examples/\">this link</a> before proceeding with this article.</em></p>\nCubic Beziers: What Are They?\n<p>The cubic-bezier function in CSS is an easing function that gives you complete control of how your animation behaves with respect to time. Here is the <a href=\"https://www.w3.org/TR/css-easing-1/#cubic-bezier-easing-functions\">official definition</a>:</p>\n<blockquote>A cubic Bézier easing function is a type of <a href=\"https://www.w3.org/TR/css-easing-1/#easing-function\">easing function</a> defined by four real numbers that specify the two control points, <code>P1</code> and <code>P2</code>, of a cubic Bézier curve whose end points <code>P0</code> and <code>P3</code> are fixed at (<code>0</code>, <code>0</code>) and (<code>1</code>, <code>1</code>) respectively. The <code>x</code> coordinates of <code>P1</code> and <code>P2</code> are restricted to the range [<code>0</code>, <code>1</code>].</blockquote>\n\n<p><strong>Note</strong>: <em>If you want to learn more about easing functions, you can check out <a href=\"https://www.smashingmagazine.com/2021/04/easing-functions-css-animations-transitions/\">this article</a>. It goes behind the scenes of how linear, cubic-bezier, and staircase functions work!</em></p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/edd8b473-78ae-4a1a-9460-d4bd266028f4/6-advanced-animations-css.png\"></p>\nBut What Is An Easing Function?\n<h3>Let’s Start With A Linear Curve</h3>\n<p>Imagine two points <em>P0</em> and <em>P1</em>, where <em>P0</em> is the starting point of the animation and <em>P1</em> is the ending point. Now imagine another point moving linearly between the two points as follows:</p>\n<a href=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/26898019-0912-4ed4-b01d-8f138601b574/7-advanced-animations-css.gif\"><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/26898019-0912-4ed4-b01d-8f138601b574/7-advanced-animations-css.gif\"></a>Source: <a href=\"https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Cubic_B%C3%A9zier_curves:~:text=%5Bedit%5D-,Linear,-curves%5Bedit\">Wikipedia</a>\n\n<p>This is called a linear curve! It is the simplest animation out there, and you probably used it before when you started learning CSS.</p>\n<h3>Next Up: The Quadratic Bezier Curve</h3>\n<p>Imagine you have three points: <em>P0</em>, <em>P1</em> and <em>P2</em>. You want the animation to move from <em>P0</em> to <em>P2</em>. In this case, <em>P1</em> is a control point that controls the curve of the animation.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/a1bfb588-f075-4998-80a5-3861eaa2b34f/8-advanced-animations-css.png\"></p>\n<p>The idea of the quadratic bezier is as follows:</p>\n<ol>\n<li>Connect imaginary lines between <em>P0</em> and <em>P1</em> and between <em>P1</em> and <em>P2</em> (represented by the gray lines).</li>\n<li>Point <em>Q0</em> moves along the line between <em>P0</em> and <em>P1</em>. At the same time, Point <em>Q1</em> moves along the line between <em>P1</em> and <em>P2</em>.</li>\n<li>Connect an imaginary line between <em>Q0</em> and <em>Q1</em> (represented by the green line).</li>\n<li>At the same time <em>Q0</em> and <em>Q1</em> start moving, the point <em>B</em> starts moving along the green line. The path that point <em>B</em> takes is the animation path.</li>\n</ol>\n<a href=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/3d3881be-db90-474b-bde1-5dd02e4de1bd/9-advanced-animations-css.gif\"><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/3d3881be-db90-474b-bde1-5dd02e4de1bd/9-advanced-animations-css.gif\"></a>Source: <a href=\"https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Cubic_B%C3%A9zier_curves:~:text=t%20in%20%5B0%2C1%5D-,Quadratic,-curves%5Bedit\">Wikipedia</a>\n\n<p>Note that <em>Q1</em>, <em>Q2</em> and <em>B</em> do not move with the same velocity. They must all start at the same time and finish their path at the same time as well. So each point moves with the appropriate velocity based on the line length it moves along.</p>\n<h3>Finally: The Cubic Bezier Curve</h3>\n<p>The cubic bezier curve consists of 4 points: <em>P0</em>, <em>P1</em>, <em>P2</em> and <em>P3</em>. The animation starts at <em>P0</em> and ends at <em>P3</em>. <em>P1</em> and <em>P2</em> are our control points.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/8c9ea13d-2386-4066-a6a6-6bc2303d9f0e/10-advanced-animations-css.png\"></p>\n<p>The cubic bezier works as follows:</p>\n<ol>\n<li>Connect imaginary lines between (<em>P0</em>, <em>P1</em>), (<em>P1</em>, <em>P2</em>) and (<em>P2</em>, <em>P3</em>). This is represented by the gray lines.</li>\n<li>Points <em>Q0</em>, <em>Q1</em> and <em>Q2</em> move along the lines (<em>P0</em>, <em>P1</em>), (<em>P1</em>, <em>P2</em>) and (<em>P2</em>, <em>P3</em>) respectively.</li>\n<li>Connect imaginary lines between (<em>Q0</em>, <em>Q1</em>) and (<em>Q1</em>, <em>Q2</em>). They are represented by the green lines.</li>\n<li>Points <em>R0</em> and <em>R1</em> move along the lines (<em>Q0</em>, <em>Q1</em>) and (<em>Q1</em>, <em>Q2</em>) respectively.</li>\n<li>Connect the line between <em>R0</em> and <em>R1</em> (represented by the blue line).</li>\n<li>Finally, Point <em>B</em> moves along the line connecting between <em>R0</em> and <em>R1</em>. This point moves along the path of the animation.</li>\n</ol>\n<a href=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/473e4b21-e920-4501-a959-84f1b8350d14/11-advanced-animations-css.gif\"><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/473e4b21-e920-4501-a959-84f1b8350d14/11-advanced-animations-css.gif\"></a>Source: <a href=\"https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Cubic_B%C3%A9zier_curves:~:text=t%20in%20%5B0%2C1%5D-,Higher,-%2Dorder%20curves%5B\">Wikipedia</a>\n\n<p>If you want to have a better feel for how cubic beziers work, I recommend checking out <a href=\"https://www.desmos.com/calculator/7arefxmgfb\">this desmos link</a>. Play around with the control points and check how the animation changes through time. (Note that the animation in the link is represented by the black line.)</p>\nStacking Animations\n<p>Big animations with lots of steps can be broken down into multiple small animations. You can achieve that by adding the <code>animation-delay</code> property to your CSS. Calculating the delay is simple; you add up the time of all the animations before the one you are calculating the animation delay for. </p>\n<p><em>For example:</em></p>\n<pre><code>animation: movePointLeft 4s linear forwards, movePointDown 3s linear forwards;\n</code></pre>\n\n<p>Here, we have two animations, <code>movePointLeft</code> and <code>movePointDown</code>. The animation delay for <code>movePointLeft</code> will be zero because it is the animation we want to run first. However, the animation delay for <code>movePointDown</code> will be four seconds because <code>movePointLeft</code> will be done after that time.</p>\n<p>Therefore, the <code>animation-delay</code> property will be as follows:</p>\n<pre><code>animation-delay: 0s, 4s;\n</code></pre>\n\n<p>Note that if you have two or more animations starting at the same time, their animation delay will be the same. In addition, when you calculate the animation delay for the upcoming animations, you will consider them as one animation.</p>\n<p><em>For example:</em></p>\n<pre><code>animation: x 4s linear forwards, y 4s linear forwards, jump 2s linear forwards;\n</code></pre>\n\n<p>Assume we want to start <code>x</code> and <code>y</code> simultaneously. In this case, the animation delay for both <code>x</code> and <code>y</code> will be zero, while the animation delay for the jump animation will be four seconds (not eight!).</p>\n<pre><code>animation-delay: 0s, 0s, 4s;\n</code></pre>\n\nCreating The Rollercoaster\n<p>Now that we have the basics covered, it’s time to apply what we learned!</p>\n<h3>Understanding The Animation</h3>\n<p>The rollercoaster path consists of three parts:</p>\n<ol>\n<li>The sliding part,</li>\n<li>The loop part,</li>\n<li>There will also be some animation to create horizontal space between the two animations above.</li>\n</ol>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/d97e9290-b3ee-4aec-8631-0d154f286f72/3-advanced-animations-css.jpg\"></p>\n<h3>Setting Things Up</h3>\n<p>We will start by creating a simple ball that will be our “cart” for the rollercoaster. </p>\n<p>1. Add this to the body of your new HTML file:</p>\n<pre><code>&lt;div id=&quot;the-cart&quot; class=&quot;cart&quot;&gt;&lt;/div&gt;\n</code></pre>\n\n<p>2. Add this to your CSS file:</p>\n<pre><code>.cart {\n  background-color: rgb(100, 210, 128);\n  height: 50px;\n  width: 50px;\n  border: 1px solid black;\n  border-radius: 50px;\n  position: absolute;\n  left: 10vw;\n  top: 30vh;\n}\n</code></pre>\n\n<p>I’ll use viewport width (<code>vw</code>) and viewport height (<code>vh</code>) properties to make the animation responsive. You are free to use any units you want.</p>\n<h3>The Sliding Part</h3>\n<p>Creating the part where the ball slides can be done using the cubic-bezier function! The animation is made up of 2 animations, one along the <code>x</code>-axis and the other along the <code>y</code>-axis. The <code>x</code>-axis animation is a normal linear animation along the <code>x</code>-axis. We can define its keyframes as follows:</p>\n<pre><code>@keyframes x {\n  to {\n    left: 40vw;\n  }\n}\n</code></pre>\n\n<p>Add it to your animation property in the ball path as follows:</p>\n<pre><code>animation: x 4s linear forwards\n</code></pre>\n\n<p>The <code>y</code>-axis animation is the one where we will use the cubic-bezier function. Let’s first define the keyframes of the animation. We want the difference between the starting and ending points to be so small that the ball reaches almost the same height.</p>\n<pre><code>@keyframes y {\n  to {\n    top: 29.99vh;\n  }\n}}\n</code></pre>\n\n<p>Now let’s think about the cubic-bezier function. We want our path to move slowly to the right first, and then when it slides, it should go faster.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/0284f860-b608-4390-a5bf-991f10ee496c/2-advanced-animations-css.png\"></p>\n<ul>\n<li>Moving slowly to the right means that $P1$ will be along the <code>x</code>-axis. So, we know it is at (<code>V</code>, <code>0</code>).<ul>\n<li>We need to choose a suitable V that makes our animation go slowly to the right but not too much so that it takes up the whole space. In this case, I found that <code>0.55</code> fits best.</li>\n</ul>\n</li>\n<li>To achieve the sliding effect, we need to move <code>P2</code> down the <code>y</code>-axis (negative value) so <code>P2=(X, -Y)</code>.<ul>\n<li><code>Y</code> should be a big value. In this case, I chose <code>Y=5000</code>.</li>\n<li>To get <code>X</code>, we know that our animation speed should be faster when sliding and slower when going up again. So, the closer <code>X</code> is to zero, The steeper the animation will be at sliding. In this case, let <code>X = 0.8</code>.</li>\n</ul>\n</li>\n</ul>\n<p>Now you have your cubic-bezier function, it will be <code>cubic-bezier(0.55, 0, 0.2, -800)</code>.</p>\n<p>Let’s add keyframes to our animation property:</p>\n<pre><code>animation: x 4s linear forwards,\n    y 4s cubic-bezier(0.55, 0, 0.2, -5000) forwards;\n</code></pre>\n\n<p>This is the first part of our animation, so the animation delay is zero. We should add an <code>animation-delay</code> property because starting from the following animation, the animations will start at a different time than the first animation.</p>\n<pre><code>animation-delay: 0s, 0s;\n</code></pre>\n\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/VwxXBQb\">Rollercoaster sliding part [forked]</a> by <a href=\"https://codepen.io/yosracodes\">Yosra Emad</a>.</p>\n<h3>Adding Horizontal Space</h3>\n<p>Before making the loop, the ball should move along the <code>x</code>-axis for a short while, so there is space between both animations. So, let’s do that!</p>\n<ul>\n<li>Define the keyframes:</li>\n</ul>\n<pre><code>@keyframes x2 {\n  to {\n    left: 50vw;\n  }\n}\n</code></pre>\n\n<ul>\n<li>Add it to the animation property:</li>\n</ul>\n<pre><code>animation: x 4s linear forwards,\n    y 4s cubic-bezier(0.55, 0, 0.2, -5000) forwards, x2 0.5s linear forwards;\n</code></pre>\n\n<p>This animation should start after the sliding animation, and the sliding animation takes four seconds; thus, the animation delay will be four seconds:</p>\n<pre><code>animation-delay: 0s, 0s, 4s;\n</code></pre>\n\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/dyemExY\">Rollercoaster horizontal space [forked]</a> by <a href=\"https://codepen.io/yosracodes\">Yosra Emad</a>.</p>\n<h3>The Loop Part</h3>\n<p>To create a circle (loop) in CSS, we need to move the circle to the center of the loop and start the animation from there. We want the circle’s radius to be <code>100px</code>, so we will change the circle position to <code>top: 20vh</code> (30 is desired radius (<code>10vh</code> here)). However, this needs to happen after the sliding animation is done, so we will create another animation with a zero-second duration and add a suitable animation delay. </p>\n<ul>\n<li>Create the keyframes:</li>\n</ul>\n<pre><code>@keyframes pointOfCircle {\n  to {\n    top: 20vh;\n  }\n}\n</code></pre>\n\n<ul>\n<li>Add this to the list of animations with duration = <code>0s</code>:</li>\n</ul>\n<pre><code>animation: x 4s linear forwards,\n    y 4s cubic-bezier(0.55, 0, 0.2, -5000) forwards, x2 0.5s linear forwards,\n    pointOfCircle 0s linear forwards;\n</code></pre>\n\n<ul>\n<li>Add the animation delay, which will be <code>4.5s</code>:</li>\n</ul>\n<pre><code>animation-delay: 0s, 0s, 4s, 4.5s;\n</code></pre>\n\n<h4>The Loop Itself</h4>\n<p>To create a loop animation:</p>\n<ul>\n<li>Create a keyframe that moves the ball back to the old position and then rotates the ball:</li>\n</ul>\n<pre><code>@keyframes loop {\n  from {\n    transform: rotate(0deg) translateY(10vh) rotate(0deg);\n  }\n  to {\n    transform: rotate(-360deg) translateY(10vh) rotate(360deg);\n  }\n}\n</code></pre>\n\n<ul>\n<li>Add the loop keyframes to the animation property:</li>\n</ul>\n<pre><code>animation: x 4s linear forwards,\n    y 4s cubic-bezier(0.55, 0, 0.2, -5000) forwards, x2 0.5s linear forwards,\n    pointOfCircle 0s linear forwards, loop 3s linear forwards;\n</code></pre>\n\n<ul>\n<li>Add the animation delay, which will also be <code>4.5</code> seconds here:</li>\n</ul>\n<pre><code>animation-delay: 0s, 0s, 4s, 4.5s, 4.5s;\n</code></pre>\n\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/mdLxZdR\">Rollercoaster loop [forked]</a> by <a href=\"https://codepen.io/yosracodes\">Yosra Emad</a>.</p>\n<h3>Adding Horizontal Space (Again)</h3>\n<p>We’re almost done! We just need to move the ball after the animation along the <code>x</code>-axis so that the ball doesn’t stop exactly after the loop the way it does in the picture above.</p>\n<ul>\n<li>Add the keyframes:</li>\n</ul>\n<pre><code>@keyframes x3 {\n  to {\n    left: 70vw;\n  }\n}\n</code></pre>\n\n<ul>\n<li>Add the keyframes to the animation property:</li>\n</ul>\n<pre><code>animation: x 4s linear forwards,\n    y 4s cubic-bezier(0.55, 0, 0.2, -800) forwards, x2 0.5s linear forwards,\n    pointOfCircle 0s linear forwards, loop 3s linear forwards,\n    x3 2s linear forwards;\n</code></pre>\n\n<ul>\n<li>Adding the suitable delay, here it will be <code>7.5s</code>:</li>\n</ul>\n<pre><code>animation-delay: 0s, 0s, 4s, 4.5s, 4.5s, 7.5s;\n</code></pre>\n\n\n\nThe Final Output\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/wvjmLKp\">Rollercoaster Final [forked]</a> by <a href=\"https://codepen.io/yosracodes\">Yosra Emad</a>.</p>\nConclusion\n<p>In this article, we covered how to combine multiple keyframes to create a complex animation path. We also covered cubic beziers and how to use them to create your own easing function. I would recommend going on and creating your own animation path to get your hands dirty with animations. If you need any help or want to give feedback, you’re more than welcome to send a message to any of the <a href=\"https://yosracodes.bio.link/\">links here</a>. Have a wonderful day/night!</p>\n"
}