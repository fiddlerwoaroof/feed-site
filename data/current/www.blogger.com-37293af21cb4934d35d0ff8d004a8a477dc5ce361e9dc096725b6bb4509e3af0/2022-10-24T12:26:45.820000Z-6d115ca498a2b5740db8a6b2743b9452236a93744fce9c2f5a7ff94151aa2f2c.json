{
  "title":"How to correctly cache build-time dependencies using Nix",
  "date":"2022-10-24T12:26:45.820000Z",
  "author":"Gabriella Gonzalez",
  "id":"tag:blogger.com,1999:blog-1777990983847811806.post-7096293096571919933",
  "link":"https://www.haskellforall.com/2022/10/how-to-correctly-cache-build-time.html",
  "content":"<!DOCTYPE html><html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"\"><head>                    </head><body><p>Professional Nix users often create a shared cache of Nix build products so that they can reuse build products created by continuous integration (CI). For example, CI might build Nix products for each main development branch of their project or even for every pull request and it would be nice if those build products could be shared with all developers via a cache.</p><p>However, uploading build products to a cache is a little non-trivial if you don’t already know the “best” solution, which is the subject of this post.</p><p>The solution described in this post is:</p><ul><li><p>Simple</p><p>It only takes a few lines of Bash code because we use the Nix command-line interface idiomatically</p></li><li><p>Efficient</p><p>It is very cheap to compute which build products to upload and requires no additional builds nor an exorbitant amount of disk space</p></li><li><p>Accurate</p><p>It uploads the build products that most people would intuitively want to upload</p></li></ul><blockquote><p>Note: Throughout this post I will be using the newer Nix command-line interface and flakes, which requires either adding this line to your <code>nix.conf</code> file:</p><pre><code>extra-experimental-features = nix-command flakes</code></pre><p>… and restarting your Nix daemon (if you have a multi-user Nix installation), or alternatively adding these flags to the beginning of all <code>nix</code> commands throughout this post:</p><div class=\"sourceCode\" id=\"cb2\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb2-1\"><a href=\"#cb2-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix <span class=\"at\">--option</span> extra-experimental-features <span class=\"st\">'nix-command flakes'</span> …</span></code></pre></div></blockquote><h4 id=\"wrong-solution-0\">Wrong solution #0</h4><p>As a running example, suppose that our CI builds a top-level build product using a command like this:</p><div class=\"sourceCode\" id=\"cb3\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb3-1\"><a href=\"#cb3-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix build .#example</span></code></pre></div><p>The naïve way to upload that to the cache would be:</p><div class=\"sourceCode\" id=\"cb4\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb4-1\"><a href=\"#cb4-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix store sign <span class=\"at\">--key-file</span> <span class=\"st\">&quot;</span><span class=\"va\">${KEY_FILE}</span><span class=\"st\">&quot;</span> <span class=\"at\">--recursive</span> .#example</span><br><span id=\"cb4-2\"><a href=\"#cb4-2\" tabindex=\"-1\"></a></span><br><span id=\"cb4-3\"><a href=\"#cb4-3\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix copy <span class=\"at\">--to</span> s3://cache.example.com .#example</span></code></pre></div><blockquote><p>Note: You will need to generate a <code>KEY_FILE</code> using the <code>nix-store --generate-binary-cache-key</code> command if you haven’t already. For more details, see the following documentation from the manual:</p><details><summary>Click to expand to see the documentation </summary><pre><code>Operation --generate-binary-cache-key<br>   Synopsis<br>       nix-store --generate-binary-cache-key key-name secret-key-file<br>       public-key-file<br><br>   Description<br>       This command generates an Ed25519 key pair (http://ed25519.cr.yp.to/)<br>       that can be used to create a signed binary cache. It takes three<br>       mandatory parameters:<br><br>       1.     A key name, such as cache.example.org-1, that is used to look up<br>              keys on the client when it verifies signatures. It can be<br>              anything, but it’s suggested to use the host name of your cache<br>              (e.g.  cache.example.org) with a suffix denoting the number of the<br>              key (to be incremented every time you need to revoke a key).<br><br>       2.     The file name where the secret key is to be stored.<br><br>       3.     The file name where the public key is to be stored.</code></pre></details></blockquote><p>That seems like a perfectly reasonable thing to do, right? However, the problem with that is that it is <em>incomplete</em>, meaning that the cache would still be missing several useful build products that developers would expect to be there.</p><p>Specifically, the above command only copies the “run-time” dependencies of our build product whereas most developers expect the cache to also include “build-time” dependencies, and I’ll explain the distinction between the two.</p><h4 id=\"run-time-vs.-build-time\">Run-time vs. Build-time</h4><p>Many paths in the <code>/nix/store</code> are not “valid” in isolation. They typically depend on other paths within the <code>/nix/store</code>.</p><p>For example, suppose that I build the GNU <code>hello</code> package, like this:</p><div class=\"sourceCode\" id=\"cb6\"><pre class=\"sourceCode haskell\"><code class=\"sourceCode haskell\"><span id=\"cb6-1\"><a href=\"#cb6-1\" tabindex=\"-1\"></a><span class=\"op\">$</span> nix build nixpkgs<span class=\"op\">#</span>hello</span></code></pre></div><p>I can query all of the other paths within the <code>/nix/store</code>that the <code>hello</code> package transitively depends on <em>at run-time</em> using this command:</p><div class=\"sourceCode\" id=\"cb7\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb7-1\"><a href=\"#cb7-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix-store <span class=\"at\">--query</span> <span class=\"at\">--requisites</span> ./result</span><br><span id=\"cb7-2\"><a href=\"#cb7-2\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/jzid7pfrhv6gpiwqbx6763v0g9c3bdzb-libobjc-11.0.0</span></span><br><span id=\"cb7-3\"><a href=\"#cb7-3\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/9rb5qaba71mkgfgd8wfqg03cmi46xarg-apple-framework-CoreFoundation-11.0</span><span class=\"op\">&gt;</span></span><br><span id=\"cb7-4\"><a href=\"#cb7-4\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/akjp4x41jjx5hzgzrschwqzr8qfsdpys-hello-2.12.1</span></span></code></pre></div><p>… or I can print the same information in tree form like this:</p><div class=\"sourceCode\" id=\"cb8\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb8-1\"><a href=\"#cb8-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix-store <span class=\"at\">--query</span> <span class=\"at\">--tree</span> ./result</span><br><span id=\"cb8-2\"><a href=\"#cb8-2\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/akjp4x41jjx5hzgzrschwqzr8qfsdpys-hello-2.12.1</span></span><br><span id=\"cb8-3\"><a href=\"#cb8-3\" tabindex=\"-1\"></a><span class=\"ex\">└───/nix/store/9rb5qaba71mkgfgd8wfqg03cmi46xarg-apple-framework-CoreFoundation-11.0.0</span></span><br><span id=\"cb8-4\"><a href=\"#cb8-4\" tabindex=\"-1\"></a>    <span class=\"ex\">└───/nix/store/jzid7pfrhv6gpiwqbx6763v0g9c3bdzb-libobjc-11.0.0</span></span></code></pre></div><p>On my macOS machine, it has two run-time dependencies (other than itself) within the <code>/nix/store</code>: <code>libobjc</code> and <code>apple-framework-CoreFoundation-11.0</code>.</p><blockquote><p>Note: there might be other run-time dependencies, because I believe Nixpkgs support for macOS requires some impure system dependencies, but I’m not an expert on this so I could be wrong.</p></blockquote><p>These are called “run-time” dependencies because we cannot run our <code>hello</code> executable without them.</p><p>Nix prevents us from getting into situations where a <code>/nix/store</code> path is missing its run-time dependencies. For example, if I were to <code>nix copy</code> the <code>hello</code> build product to any cache, then Nix would perform the following steps, in order:</p><ul><li><p>Copy <code>libobjc</code> to the cache</p><p>… since that has no dependencies</p></li><li><p>Copy <code>apple-framework-CoreFoundation</code> to the cache</p><p>… since its <code>libobjc</code> dependency is now satisfied within the cache</p></li><li><p>Copy <code>hello</code> to the cache</p><p>… since its <code>apple-framework-CoreFoundation</code> dependency is now satisfied within the cache</p></li></ul><p>However, Nix also has a separate notion of “build-time” dependencies, which are dependencies that we need to in order to build the <code>hello</code> package.</p><blockquote><p>Note: The reason we’re interested in build-time dependencies for our project is that we want developers to be able to rebuild the project if they make any changes to the source code. If we were to only cache the run-time dependencies of our project that wouldn’t cache the development environment that developers need.</p></blockquote><p>In order to query these dependencies I need to first get the “derivation” (<code>.drv</code> file) for <code>hello</code>:</p><div class=\"sourceCode\" id=\"cb9\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb9-1\"><a href=\"#cb9-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> DERIVATION=<span class=\"st\">&quot;</span><span class=\"va\">$(</span><span class=\"ex\">nix</span> path-info <span class=\"at\">--derivation</span> nixpkgs#hello<span class=\"va\">)</span><span class=\"st\">&quot;</span></span><br><span id=\"cb9-2\"><a href=\"#cb9-2\" tabindex=\"-1\"></a></span><br><span id=\"cb9-3\"><a href=\"#cb9-3\" tabindex=\"-1\"></a><span class=\"ex\">$</span> declare <span class=\"at\">-p</span> DERIVATION</span><br><span id=\"cb9-4\"><a href=\"#cb9-4\" tabindex=\"-1\"></a><span class=\"bu\">typeset</span> <span class=\"va\">DERIVATION</span><span class=\"op\">=</span>/nix/store/4a78f0s4p5h2sbcrrzayl5xas2i7zq1m-hello-2.12.1.drv</span></code></pre></div><p>You can think of a derivation file as a build recipe that contains instructions for how to build the corresponding build product (the <code>hello</code> package in this case).</p><p>I can query the direct dependencies of that derivation using this command:</p><div class=\"sourceCode\" id=\"cb10\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb10-1\"><a href=\"#cb10-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix-store <span class=\"at\">--query</span> <span class=\"at\">--references</span> <span class=\"st\">&quot;</span><span class=\"va\">${DERIVATION}</span><span class=\"st\">&quot;</span></span><br><span id=\"cb10-2\"><a href=\"#cb10-2\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/9krlzvny65gdc8s7kpb6lkx8cd02c25b-default-builder.sh</span></span><br><span id=\"cb10-3\"><a href=\"#cb10-3\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/labgzlb16svs1z7z9a6f49b5zi8hb11s-bash-5.1-p16.drv</span></span><br><span id=\"cb10-4\"><a href=\"#cb10-4\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/cdk3pz11mvhqpphr0197wwmzhqppn7rl-stdenv-darwin.drv</span></span><br><span id=\"cb10-5\"><a href=\"#cb10-5\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/hwymznwkd1kgf5ldcldjl9bnc1wz2azb-hello-2.12.1.tar.gz.drv</span></span></code></pre></div><p>Many of these dependencies are themselves derivations (<code>.drv</code> files), meaning that they represent other packages that Nix might have to build or fetch from a cache.</p><blockquote><p>Note: the <code>.drv</code> files are actually not the build-time dependencies, but rather the instructions for building them. You can convert any <code>.drv</code> file to the matching product it is supposed to build using the same <code>nix build</code> command, like this:</p><div class=\"sourceCode\" id=\"cb11\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb11-1\"><a href=\"#cb11-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix build /nix/store/labgzlb16svs1z7z9a6f49b5zi8hb11s-bash-5.1-p16.drv</span></code></pre></div></blockquote><p>Does that mean that these build-time dependencies are on our machine if we built <code>nixpkgs#hello</code>? Not necessarily. In fact, in all likelihood the <code>nixpkgs#hello</code> build was cached, meaning that <code>nix build nixpkgs#hello</code> only downloaded <code>hello</code>and its run-time dependencies and no build-time dependencies were required nor installed by Nix.</p><p>However, I could in principle force Nix to build the <code>hello</code> package instead of downloading it from a cache, like this:</p><div class=\"sourceCode\" id=\"cb12\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb12-1\"><a href=\"#cb12-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix build nixpkgs#hello <span class=\"at\">--rebuild</span></span></code></pre></div><p>… and that would download the direct build-time dependencies of the <code>hello</code> package in order to rebuild the package.</p><h4 id=\"wrong-solution-1\">Wrong solution #1</h4><p>By this point you might suppose that you have enough information to come up with a better set of <code>/nix/store</code> paths to cache. Your solution might look like this:</p><ul><li><p>Get the derivation for the top-level build product</p></li><li><p>Get the direct build-time dependencies of that derivation</p></li><li><p>Build the top-level build product and its direct build-time dependencies</p></li><li><p>Cache the top-level build product and its direct build-time dependencies</p></li></ul><p>In other words, something like this Nix code:</p><div class=\"sourceCode\" id=\"cb13\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb13-1\"><a href=\"#cb13-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> DERIVATION=<span class=\"st\">&quot;</span><span class=\"va\">$(</span><span class=\"ex\">nix</span> path-info <span class=\"at\">--derivation</span> <span class=\"st\">&quot;</span><span class=\"va\">${BUILD}</span><span class=\"st\">&quot;</span><span class=\"va\">)</span><span class=\"st\">&quot;</span></span><br><span id=\"cb13-2\"><a href=\"#cb13-2\" tabindex=\"-1\"></a></span><br><span id=\"cb13-3\"><a href=\"#cb13-3\" tabindex=\"-1\"></a><span class=\"ex\">$</span> DEPENDENCIES=<span class=\"er\">(</span><span class=\"va\">$(</span><span class=\"ex\">nix-store</span> <span class=\"at\">--query</span> <span class=\"at\">--references</span> <span class=\"st\">&quot;</span><span class=\"va\">${DERIVATION}</span><span class=\"st\">&quot;</span><span class=\"va\">)</span><span class=\"kw\">)</span></span><br><span id=\"cb13-4\"><a href=\"#cb13-4\" tabindex=\"-1\"></a></span><br><span id=\"cb13-5\"><a href=\"#cb13-5\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix build <span class=\"st\">&quot;</span><span class=\"va\">${BUILD}</span><span class=\"st\">&quot;</span> <span class=\"st\">&quot;</span><span class=\"va\">${DEPENDENCIES</span><span class=\"op\">[@]</span><span class=\"va\">}</span><span class=\"st\">&quot;</span></span><br><span id=\"cb13-6\"><a href=\"#cb13-6\" tabindex=\"-1\"></a></span><br><span id=\"cb13-7\"><a href=\"#cb13-7\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix store sign <span class=\"at\">--key-file</span> <span class=\"st\">&quot;</span><span class=\"va\">${KEY_FILE}</span><span class=\"st\">&quot;</span> <span class=\"at\">--recursive</span> <span class=\"st\">&quot;</span><span class=\"va\">${BUILD}</span><span class=\"st\">&quot;</span> <span class=\"st\">&quot;</span><span class=\"va\">${DEPENDENCIES</span><span class=\"op\">[@]</span><span class=\"va\">}</span><span class=\"st\">&quot;</span></span><br><span id=\"cb13-8\"><a href=\"#cb13-8\" tabindex=\"-1\"></a></span><br><span id=\"cb13-9\"><a href=\"#cb13-9\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix copy <span class=\"at\">--to</span> <span class=\"st\">&quot;</span><span class=\"va\">${CACHE}</span><span class=\"st\">&quot;</span> <span class=\"st\">&quot;</span><span class=\"va\">${BUILD}</span><span class=\"st\">&quot;</span> <span class=\"st\">&quot;</span><span class=\"va\">${DEPENDENCIES</span><span class=\"op\">[@]</span><span class=\"va\">}</span><span class=\"st\">&quot;</span></span></code></pre></div><p>This is better, but still not good enough!</p><p>The problem with this solution is that it only works well if your dependencies never change and you only modify your top-level project. If you upgrade or patch any of your direct build-time dependencies then you need to have <em>their</em> build-time dependencies cached so that you can quickly rebuild them.</p><p>In fact, going two layers deep is still not enough; in practice you can’t easily anticipate in advance how deep in the build-time dependency tree you might need to patch or upgrade things. For example, you might need to patch or upgrade your compiler, which is really deep in your build-time dependency tree.</p><h4 id=\"wrong-solution-2\">Wrong solution #2</h4><p>Okay, so maybe we can try to build and cache <em>all</em> of our build-time dependencies?</p><p>Wrong again. There are way too many of them. You can query them by replacing <code>--references</code> with <code>--requisites</code> and you’ll a giant list of results, even for “small” packages. For example:</p><div class=\"sourceCode\" id=\"cb14\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb14-1\"><a href=\"#cb14-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> DERIVATION=<span class=\"va\">$(</span><span class=\"ex\">nix</span> path-info <span class=\"at\">--derivation</span> nixpkgs#hello<span class=\"va\">)</span></span><br><span id=\"cb14-2\"><a href=\"#cb14-2\" tabindex=\"-1\"></a></span><br><span id=\"cb14-3\"><a href=\"#cb14-3\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix-store <span class=\"at\">--query</span> <span class=\"at\">--requisites</span> <span class=\"st\">&quot;</span><span class=\"va\">${DERIVATION}</span><span class=\"st\">&quot;</span></span><br><span id=\"cb14-4\"><a href=\"#cb14-4\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/8djp1rizc1dblv8svnb0mpa0c3lwvc17-drop-comments.patch</span></span><br><span id=\"cb14-5\"><a href=\"#cb14-5\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/9krlzvny65gdc8s7kpb6lkx8cd02c25b-default-builder.sh</span></span><br><span id=\"cb14-6\"><a href=\"#cb14-6\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/3glray2y14jpk1h6i599py7jdn3j2vns-mkdir.drv</span></span><br><span id=\"cb14-7\"><a href=\"#cb14-7\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/50ql5q0raqkcydmpi6wqvnhs9hpdgg5f-cpio.drv</span></span><br><span id=\"cb14-8\"><a href=\"#cb14-8\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/81xahsrhpn9mbaslgi5sz7gsqra747d4-unpack-bootstrap-tools-aarch64.sh</span></span><br><span id=\"cb14-9\"><a href=\"#cb14-9\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/fzbk4fnbjqhr0l1scx5fspsx5najbrbm-bootstrap-tools.cpio.bz2.drv</span></span><br><span id=\"cb14-10\"><a href=\"#cb14-10\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/gxzl4vmccqj89yh7kz62frkxzgdpkxmp-sh.drv</span></span><br><span id=\"cb14-11\"><a href=\"#cb14-11\" tabindex=\"-1\"></a><span class=\"ex\">…</span> \uD83C\uDF3A 500+ derivations later \uD83C\uDF3A …</span><br><span id=\"cb14-12\"><a href=\"#cb14-12\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/i0zc5mm4vpj3lviyydb9s73j53mypkrg-nghttp2-1.49.0.drv</span></span><br><span id=\"cb14-13\"><a href=\"#cb14-13\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/w37b5s734m53gxnzqyb5v0v98mhdfg2i-coreutils-9.1.drv</span></span><br><span id=\"cb14-14\"><a href=\"#cb14-14\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/mmsrbggvzn6rwlx1ijw90sw3wvhzj18j-openssl-3.0.5.drv</span></span><br><span id=\"cb14-15\"><a href=\"#cb14-15\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/n7iibs6b818v402j0yczf4mgy73sbzpv-libssh2-1.10.0.drv</span></span><br><span id=\"cb14-16\"><a href=\"#cb14-16\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/z074ki54p77r7db3wsgxh9p18f67xnv8-curl-7.85.0.drv</span></span><br><span id=\"cb14-17\"><a href=\"#cb14-17\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/hwymznwkd1kgf5ldcldjl9bnc1wz2azb-hello-2.12.1.tar.gz.drv</span></span><br><span id=\"cb14-18\"><a href=\"#cb14-18\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/4a78f0s4p5h2sbcrrzayl5xas2i7zq1m-hello-2.12.1.drv</span></span></code></pre></div><details><summary>Click to expand and see the full list of build-time dependencies </summary><pre><code>/nix/store/8djp1rizc1dblv8svnb0mpa0c3lwvc17-drop-comments.patch<br>/nix/store/9krlzvny65gdc8s7kpb6lkx8cd02c25b-default-builder.sh<br>/nix/store/3glray2y14jpk1h6i599py7jdn3j2vns-mkdir.drv<br>/nix/store/50ql5q0raqkcydmpi6wqvnhs9hpdgg5f-cpio.drv<br>/nix/store/81xahsrhpn9mbaslgi5sz7gsqra747d4-unpack-bootstrap-tools-aarch64.sh<br>/nix/store/fzbk4fnbjqhr0l1scx5fspsx5najbrbm-bootstrap-tools.cpio.bz2.drv<br>/nix/store/gxzl4vmccqj89yh7kz62frkxzgdpkxmp-sh.drv<br>/nix/store/pjbpvdy0gais8nc4sj3kwpniq8mgkb42-bzip2.drv<br>/nix/store/7kcayxwk8khycxw1agmcyfm9vpsqpw4s-bootstrap-tools.drv<br>/nix/store/1i5y55x4b4m9qkx5dqbmr1r6bvrqbanw-multiple-outputs.sh<br>/nix/store/59jmzisg8fkm9c125fw384dqq1np602l-move-docs.sh<br>/nix/store/bnj8d7mvbkg3vdb07yz74yhl3g107qq5-patch-shebangs.sh<br>/nix/store/cickvswrvann041nqxb0rxilc46svw1n-prune-libtool-files.sh<br>/nix/store/ckzrg0f0bdyx8rf703nc61r3hz5yys9q-builder.sh<br>/nix/store/fyaryjvghbkpfnsyw97hb3lyb37s1pd6-move-lib64.sh<br>/nix/store/g8xg0i02aqwhgxwd2vnp5ax3d6lrkg1v-strip.sh<br>/nix/store/jngr4r80x5jn482ckqrfh08ljrx1k86f-setup.sh<br>/nix/store/kd4xwxjpjxi71jkm6ka0np72if9rm3y0-move-sbin.sh<br>/nix/store/kxw6q8v6isaqjm702d71n2421cxamq68-make-symlinks-relative.sh<br>/nix/store/m54bmrhj6fqz8nds5zcj97w9s9bckc9v-compress-man-pages.sh<br>/nix/store/ngg1cv31c8c7bcm2n8ww4g06nq7s4zhm-set-source-date-epoch-to-latest.sh<br>/nix/store/wlwcf1nw2b21m4gghj70hbg1v7x53ld8-reproducible-builds.sh<br>/nix/store/nbxwxwqwcr9rrmxb6gb532f18102815x-bootstrap-stage0-stdenv-darwin.drv<br>/nix/store/ycwm35msmsdi2qgjax1slmjffsmwy8am-write-mirror-list.sh<br>/nix/store/i65va14cylqc74y80ksgnrsaixk39mmh-mirrors-list.drv<br>/nix/store/lphxcbw5wqsjskipaw1fb8lcf6pm6ri6-builder.sh<br>/nix/store/bgp77z9z42x35vmwyfywqaiqsmnb3ffa-patchutils-0.3.3.tar.xz.drv<br>/nix/store/3lhw0v2wyzimzl96xfsk6psfmzh38irh-bash51-007.drv<br>/nix/store/3p62kw9mpkcp0grhirfn46i9afhqf0c9-bash51-015.drv<br>/nix/store/3za6mykjk49sr616w80lvmy5xcmbkrp3-bash51-006.drv<br>/nix/store/5lv0fbn6ajwdzw04nz88cc0qqrgrvnp1-bash51-016.drv<br>/nix/store/4dq81yma6drk9701h17h64zx47r7p5n8-utils.sh<br>/nix/store/ds0q1li2i96dy7yp6n8zkbakz7m7d5l8-bootstrap-stage0-stdenv-darwin.drv<br>/nix/store/vcbpmcxpir9nyy480vx5sxb4pm2v0dps-bootstrap-stage0-sigtool.drv<br>/nix/store/5xk8j72a1dddq1gxh39amgifknwb0lvm-signing-utils.drv<br>/nix/store/fmd71yqpgwrkdbidzxwmfasqp39zzf8r-CLTools_macOSNMOS_SDK.pkg.drv<br>/nix/store/ijdrwgv6kv4k17qb5jvqkbs1ccqrlalb-bootstrap-stage0-pbzx.drv<br>/nix/store/z727aawh6imz3hpmviqyf4zlgprfn8zf-bootstrap-stage0-cpio.drv<br>/nix/store/fbhkqzn4wc69pa4rvndin5h4b8k02f5c-MacOSX-SDK-11.0.0.drv<br>/nix/store/72fl7wcbnl6srm5dxb7xbnn20zr07011-libobjc-11.0.0.drv<br>/nix/store/93n8xmgm6x65mh88amw15wps3h18yqn8-bootstrap-stage0-libcxx.drv<br>/nix/store/cyk47lyfswsxgn7z2qnhkp0919nhdd3b-config.sub?id=6faca61810d335c7837f320733fe8e15a1431fc2.drv<br>/nix/store/lmdwlh09b7g3kzga0i2hprcfxszg3ghz-config.guess?id=6faca61810d335c7837f320733fe8e15a1431fc2.drv<br>/nix/store/9vh7qbpb8chmx5r5cswrix00hngy7vky-gnu-config-2021-01-25.drv<br>/nix/store/2idjp2xdckqyrdk3hd8msp4cfdi6b8if-utils.bash<br>/nix/store/47gspvwaxra868q4rsmva0g5nz7zac6p-add-clang-cc-cflags-before.sh<br>/nix/store/797k3249lr4rx8wslf7kcsa3hv6fis3x-role.bash<br>/nix/store/bybz12bxjbk94hm58zc70sc0xhj2dxif-add-darwin-ldflags-before.sh<br>/nix/store/c1vmxz359mfljs3cdimhd2fr6fw0n99s-add-hardening.sh<br>/nix/store/civvq4xh4p0mj04l7k73p1xbsq1rs9bc-darwin-install_name_tool-wrapper.sh<br>/nix/store/dk3ly72kiv27srcj1mjr5n4112vx2hfk-setup-hook.sh<br>/nix/store/khkfggnk4h14f2spsjcjrxlf8himd4vj-bootstrap-stage0-rewrite-tbd.drv<br>/nix/store/ff3yqdllxmlp1r8mfkfgjf671r8flf8j-libSystem-11.0.0.drv<br>/nix/store/gvr0mz9wfz4g0z9w6477ikywmcivk1mh-bootstrap-stage0-coreutils.drv<br>/nix/store/jravmbdjn0md7cnn6rbqwf3aflw72msb-post-link-sign-hook.drv<br>/nix/store/js1lic1bmif60d4mlffkpbvz5jim34n3-darwin-strip-wrapper.sh<br>/nix/store/m0ww06j4y2v3jdsabrr8n0y9d4nnvqn3-bootstrap-stage0-gnugrep.drv<br>/nix/store/mrzpfh0ml9k07sw019ydagbb2z1q4sxz-add-flags.sh<br>/nix/store/vicx6qnvvxb96y0iwnya977viira2apc-ld-wrapper.sh<br>/nix/store/dj5xngrf61x9isyp2r5d84h3i43wg65l-bootstrap-stage0-binutils-wrapper-.drv<br>/nix/store/gn1b4gh07byi8xnahgc800jznyarqin0-bootstrap-stage0-clang.drv<br>/nix/store/hc3z14jhqg35x5286hw5wmc3injg62fa-add-hardening.sh<br>/nix/store/ji2yrl1na00bwav65hh1vr0nc0s1xzvz-add-flags.sh<br>/nix/store/lck6bijpq64zjvmkwdi081v6wm2r8nyx-bootstrap-stage0-libcxxabi.drv<br>/nix/store/li62b4bvg51zikbni9xadg08za340k71-cc-wrapper.sh<br>/nix/store/nc4bvrgb8jxh4k1fq2zgzh4mmxqavp54-setup-hook.sh<br>/nix/store/xbfsjb46np040h2aph1k76iybq9rzd7x-bootstrap-stage0-compiler-rt.drv<br>/nix/store/cz1x2bgvnzi0qc39hjwm0ppdvqwkfybl-bootstrap-stage0-clang-wrapper-11.1.0.drv<br>/nix/store/00qr10y7z2fcvrp9b2m46710nkjvj55z-update-autotools-gnu-config-scripts.sh<br>/nix/store/qzvw98z9qwv3vasfc9lwcq0d1sgfin6v-hook.drv<br>/nix/store/vp49i9krzqf282vj6bqr6rxs96d2a1fv-apple-framework-CoreFoundation-11.0.0.drv<br>/nix/store/lkjwmgmnm4f7d3iiglxglrgll1c8vdkf-bootstrap-stage1-stdenv-darwin.drv<br>/nix/store/r09r8wpshjqdkx0xwkin79km812nbgp3-m4-1.4.19.tar.bz2.drv<br>/nix/store/7rxh71ny4xrckw1ip50hv44mylpxpd5v-gnum4-1.4.19.drv<br>/nix/store/h1s43lrwjjf98dmfhayn6cmax2h19qz9-bison-3.8.2.tar.gz.drv<br>/nix/store/85f1q5rm0qzqay7fk3935h6kvzfqdcfv-http-tiny-verify-ssl-by-default.patch<br>/nix/store/dm81j9qdcdr4c458pqbc9wvq9ymgzk4m-setup-hook.sh<br>/nix/store/mb381gpm9k5wdl37l5ad5pp8w11qzhjg-no-sys-dirs-5.31.patch<br>/nix/store/n315a3g9bcxlypqzbm36nzrrg40h6lcj-cpp-precomp.patch<br>/nix/store/ppbkcbhzwzwpqaad6whhr9qgxjvj82gj-perl-5.36.0.tar.gz.drv<br>/nix/store/0phjl3yzr4m1gady21l21h4brn140hjm-CVE-2022-37434.patch<br>/nix/store/jw5f744vn0nv6q0ms6s5q0w0kkml2a8v-fix-configure-issue-cross.patch<br>/nix/store/mg7z3nsc96864cfkx2jwda7wmpdn71dl-zlib-1.2.12.tar.gz.drv<br>/nix/store/xniqbx8mh8lx06bw267g6hkfkp2c79kn-comprehensive-crc-validation-for-wrong-implementations.patch<br>/nix/store/vblzwf77rk1mxxk6qjhgaqp43z36j992-zlib-1.2.12.drv<br>/nix/store/x0ll5lnagy6lg7hgvqb26il3qnmsqisd-sw_vers.patch<br>/nix/store/m9h3rw3jlzf8hapgiw29i5fjyzw7r9v4-perl-5.36.0.drv<br>/nix/store/5nxxxmzb23y9pzp673grmfs95jrx14rx-bison-3.8.2.drv<br>/nix/store/13i5k09s5g6gdkaj731rqsi1qc70khka-bootstrap-stage1-stdenv-darwin.drv<br>/nix/store/jik02mkz72r2f6hhxnlhp6h5f0fi89gw-expand-response-params.c<br>/nix/store/g9h3q3y44p4ycn8vdai1s9aw1f0s7icy-expand-response-params.drv<br>/nix/store/734l1nlc4d2zbksafqvp5436ynp26z3g-bash51-014.drv<br>/nix/store/crar8b49gsplly9x0v279bibvixmj9gc-bash51-003.drv<br>/nix/store/d7i8a7c8mb0qmsb1c3rj8g38m071vmaf-bash51-004.drv<br>/nix/store/gapa7v6rz1gzjsn1kckpb4fj07pmznw6-bash-5.1.tar.gz.drv<br>/nix/store/ig7d802vp43ap4ga26r2vd174h2c1bk7-bash51-010.drv<br>/nix/store/jj3jm1bjqnlwz4yassc9h70mwmrxy442-bash51-008.drv<br>/nix/store/krhwn1440gxvry5gw4wmzk6y83fm4bdw-bash51-001.drv<br>/nix/store/n92wsf556wqp4dbf0rxwx1b175m0vwyn-bash51-013.drv<br>/nix/store/nkzvvyvmckwv4a8r84iwyfbivvw05nvc-bash51-009.drv<br>/nix/store/nm5946y3ffkynrz67vz47ik0ygvg6byn-pgrp-pipe-5.1.patch<br>/nix/store/pkd2vxq8w5fhrfk6k89hi29d5ldbbj29-bash51-005.drv<br>/nix/store/q6jpdv2j5dh4nbsbmkzy6za1vfpb2l30-bash51-011.drv<br>/nix/store/w8q9jdvb96sayxyi25amd27yki283zg9-bash51-002.drv<br>/nix/store/wg9gacyfgldnwh3gc23nr49n4j0b58sv-bash51-012.drv<br>/nix/store/4kpfa2fhfdb6r9icym3q8n3w1s8mfv6z-bash-5.1-p16.drv<br>/nix/store/k9bkzj7nhqxnvbmz5vk8pmzxpmym0qa6-file-5.43.tar.gz.drv<br>/nix/store/hgps4nk9p01z9zngmbnbv42pqmzg9nhg-file-5.43.drv<br>/nix/store/4cmjzk8yr6i5vls5d2050p653zzdvmvp-setup-hook.sh<br>/nix/store/4hcdpxjmr4nh625ry840g70xp00vdf5a-2.71-fix-race.patch<br>/nix/store/kxdvjnq8cl9jd5g9jndhhl5a17h2xbih-autoconf-2.71.tar.xz.drv<br>/nix/store/irpqw60zcy00lj3hjia8gr15z984x9xn-texinfo-6.8.tar.xz.drv<br>/nix/store/19ndr8g629l0xzzs1x7xz4z0fbkwpgcj-xz-5.2.6.tar.bz2.drv<br>/nix/store/kas3n4g0jyrz3rhl1znjcxqmpyddk8sw-xz-5.2.6.drv<br>/nix/store/5pj1w63j668yqssrxb4dykpzpm1yhx9q-libiconv-50.tar.gz.drv<br>/nix/store/xrvbfm0ahaiik1vlxzn3vsp5gyhksy2n-setup-hook.sh<br>/nix/store/5xx3gba361rf696b27r3jfa0q7rmlyh9-libiconv-50.drv<br>/nix/store/ny42y6hs4p294rvnrwbmrpwzqghw2816-gettext-setup-hook.sh<br>/nix/store/p2fp6i7hjx9af1wbwr32k217wp2dxmiw-absolute-paths.diff<br>/nix/store/sihz0cdcajckxnhjm8n4p652sbd5xwxd-gettext-0.21.tar.gz.drv<br>/nix/store/ri729qz1iq3iqr9bdvb406izklj1fpfa-gettext-0.21.drv<br>/nix/store/yl6g04fsr6p9lkvccqjjl8q1xnnmw49s-fix-glibc-2.34.patch<br>/nix/store/v94cwmp6hs6dvrw6v4jmqk9jwl0ik75q-texinfo-6.8.drv<br>/nix/store/ih062232k706fpydng4xlk75fpzraxmn-autoconf-2.71.drv<br>/nix/store/r5kd1di71n7xk9kjvrgyy75cz0c0skay-automake-1.16.5.tar.xz.drv<br>/nix/store/hqf9nllss9z0i3gmi8sv9kjcm9qhvf8q-automake-1.16.5.drv<br>/nix/store/ipdgmqcfn56mhgmq3hv3yy5xj2kj2ri7-libtool-2.4.7.tar.gz.drv<br>/nix/store/06nfwja5j8c36n780jvlwjv8gs2m7i3m-gettext-1.07.tar.gz.drv<br>/nix/store/qf3mzpvsmkrw963xchbivcci06078n13-builder.sh<br>/nix/store/j7jrmh8zz3jjcdsa050f1ja19nm07vz7-perl5.36.0-gettext-1.07.drv<br>/nix/store/lac4y6zxaqqhyf4r60p3ag68k3ckifvv-help2man-1.49.2.tar.xz.drv<br>/nix/store/k9223a4j2ar7j76zpjs8fmlfl9q76a76-help2man-1.49.2.drv<br>/nix/store/9gns0vpn7fajyzm3w2rsdbcz9pqgfsrm-libtool-2.4.7.drv<br>/nix/store/ghdamd4hl6yi7jysh1x3436fj1v9yvjb-autoreconf.sh<br>/nix/store/8byqd66k9p5zbiggz2a9frki47xqy28r-hook.drv<br>/nix/store/ing5qg4q87wdvm1h455c3xn889m2bbj0-coreutils-9.1.tar.xz.drv<br>/nix/store/66ayp7hm682rxhlxd061fvprrmf2zx3c-gmp-6.2.1.tar.bz2.drv<br>/nix/store/h96aykl4imzhfapnmavplr49v43c8apx-6.2.1-CVE-2021-43618.patch<br>/nix/store/k49s9lr0lw5zhwsz4ni4rf2643byqrak-gmp-with-cxx-6.2.1.drv<br>/nix/store/jp5jbqfxjazf38w63bipqf68h7hyq4v0-coreutils-9.1.drv<br>/nix/store/322332kbmj7ig7ii3cwlfjcg4mf5xgz6-grep-3.7.tar.xz.drv<br>/nix/store/m2qc8a9c4yr5xmqck50fpzzwzpqggbbw-stacksize-detection.patch<br>/nix/store/qk3pnajspb378zx6c8g0anj2d7z31a88-pcre-8.45.tar.bz2.drv<br>/nix/store/pgzgn3knxdn335qci805a49bvlnl4ppa-pcre-8.45.drv<br>/nix/store/l2bbsavfww8zv5a9ncldh83c9vsz3y01-gnugrep-3.7.drv<br>/nix/store/1igs2sr5j99180z801426ivzzbikxi7q-CVE-2019-13232-2.patch.drv<br>/nix/store/1k1wn8807yizgz3ghnbd4k6zsc0dzfkr-CVE-2014-9913.patch<br>/nix/store/2cq4hsc1v8ylccspw8351r72s56w1fia-CVE-2015-7697.diff<br>/nix/store/6np2acjv1nxcg0xzsv9a76wyrpxznkna-CVE-2014-8141.diff<br>/nix/store/6zqn6w9rwkgfa6z1hpagnh5xhz2dag6m-CVE-2015-7696.diff<br>/nix/store/97d26l91h0db8h0qkmhxwi5d8shrilv6-CVE-2016-9844.patch<br>/nix/store/p67r2s04xw8plqs0552rc5qyj5016wxb-bzip2-1.0.8.tar.gz.drv<br>/nix/store/ra4ikm6b0nxgi0sil4mk3ikkingm80x0-bzip2-1.0.6.2-autoconfiscated.patch.drv<br>/nix/store/awrvprhqr5j0n6n8zqss2i5cyv25wis3-bzip2-1.0.8.drv<br>/nix/store/bqwhj80hz1z49365miaqcxp4c2mzsfp3-unzip60.tar.gz.drv<br>/nix/store/cciw7lgkldvx25d77cxpjhh1iw4xghd9-setup-hook.sh<br>/nix/store/d9b2qrrq32jzdsdx4y33inzrra5n5z5n-CVE-2014-8140.diff<br>/nix/store/ly8k93l59mlzlgnq679vcp54nqpi4sdc-06-initialize-the-symlink-flag.patch.drv<br>/nix/store/mwkywhh9wvym79lzlk8gsanw5swhfb8w-CVE-2019-13232-3.patch.drv<br>/nix/store/p46prhgmv7ibjh9igfkbc6zfxbbi6sk5-dont-hardcode-cc.patch<br>/nix/store/p55a764pi2f4kkx3adb43bxb2dnb4z6r-CVE-2018-18384.patch<br>/nix/store/pdcj2chp5c2gvm2jc3shbajfc62kbx1i-CVE-2014-9636.diff<br>/nix/store/rdkdki1f24q8mqgnbsyk7gmh28c027ks-CVE-2014-8139.diff<br>/nix/store/wx62rx7078a86mpimgg5gfsiisx3qk5l-CVE-2019-13232-1.patch.drv<br>/nix/store/zxpjddlgb46cdynbgbgq41i6k9a40wfg-unzip-6.0.drv<br>/nix/store/cnds925pfnac943p1f516pxwrbqy0gdi-source.drv<br>/nix/store/2cqnhs2ds0gn7xrq0zcwbj7gsv6l5xr7-use-etc-ssl-certs-darwin.patch<br>/nix/store/2yk6ab4c6j9y00g3x3cixqgi9jmgiwzd-openssl-3.0.5.tar.gz.drv<br>/nix/store/6hyy4ngzkxdsg71zmryvy3xkw0ydag21-openssl-disable-kernel-detection.patch<br>/nix/store/sq4h6bqjx12v9whvm65pjss25hg1538q-nix-ssl-cert-file.patch<br>/nix/store/imc07k6kg26rcam012pkgxba3mj0c0xq-openssl-3.0.5.drv<br>/nix/store/1ksmnsr3m6paw8gs7jp9b623agzdrqi2-add-flags.sh<br>/nix/store/9whvblgb7bgnmqsv7y5xqs1w8xv9aa1d-pkg-config-wrapper.sh<br>/nix/store/c4akajrb4jg50k72jw7zfbyv8z139ri0-setup-hook.sh<br>/nix/store/f4bvwqvj0y3z6blvh0knz71a8yq1c45p-requires-private.patch<br>/nix/store/qycyfzgf92i96ygij2b5bz27ll6mkyyw-pkg-config-0.29.2.tar.gz.drv<br>/nix/store/dq5y5c22p6ixswcqaxb6s0ymvi2bwmlm-pkg-config-0.29.2.drv<br>/nix/store/ssvy1s8p78q1jfy7bap0kl49sm8ad0m3-pkg-config-wrapper-0.29.2.drv<br>/nix/store/xz6rbdix12jn1bd3lydd1cagnvr94yf4-sigtool-0.1.2.drv<br>/nix/store/gp50m2w3aab5w1pgx9h18yky5x5jzzyq-signing-utils.drv<br>/nix/store/gz78khbgfz3rh5phvq1bavdp4v0bcimn-post-link-sign-hook.drv<br>/nix/store/zp333xdrvsgn3mjicwcbfiqd259ix6gd-MacOSX-SDK-11.0.0.drv<br>/nix/store/x3wxdzi7f36fnb1sryr1ifgafsycasks-libSystem-11.0.0.drv<br>/nix/store/v77imik30yacsdbfqkkdv0djyk1hsdgh-bootstrap-stage0-binutils-wrapper-.drv<br>/nix/store/6cqn1ln7v306ymslgmvcy77pbq30pjy1-bootstrap-stage0-clang-wrapper-11.1.0.drv<br>/nix/store/3inq067xw7bic7dy828bgjjzx54kav9v-install-shell-files.sh<br>/nix/store/70pf3jk5jc64jc82hqck1jx6z5l42xj3-install-shell-files.drv<br>/nix/store/zwlzlqvh3x2nw1421cvx2210bzz3xgfn-libev-4.33.tar.gz.drv<br>/nix/store/gn80i99rcc85d7l687d1jdmcm0yl51yv-libev-4.33.drv<br>/nix/store/h60a8qk9wqy8gbdvl9sf0qcnz63by9w4-nghttp2-1.49.0.tar.bz2.drv<br>/nix/store/09ba5xcaaaybqdsvljh5skzzl6blmmw4-c-ares-1.18.1.tar.gz.drv<br>/nix/store/l0niywhmkdqv97i8rlxzr1yqbn9k7sc1-c-ares-1.18.1.drv<br>/nix/store/36rbachr8ra090v3m6s86603sfp382k4-nghttp2-1.49.0.drv<br>/nix/store/fgr4mizzn2y712bqlk895lk8wpws27ir-dyld-433.5.tar.gz.drv<br>/nix/store/7c2sh9fyqz113rrpx5mdnmkk8mdrhb47-dyld-433.5.drv<br>/nix/store/81gwh57vnrm6qpw3gxmdmrjsp26dxi7p-find-xml-catalogs.sh<br>/nix/store/1vaq58n8rvn8bbr9mcm3k30zkr63480d-hook.drv<br>/nix/store/68bzcamhirzd95vsh05wilz8p8vfvyb6-expat-2.4.9.tar.xz.drv<br>/nix/store/0vyw0ywxhng31zvxqia2y23ljjmzsdj6-expat-2.4.9.drv<br>/nix/store/345r2zz7pgiyk91j89qlf7mhs95jrv6f-no-ldconfig.patch<br>/nix/store/zi0m9pfmvy5lw89x7a8x674rm99i8qiq-setup-hook.sh<br>/nix/store/4aakllhrfd3r87a67g0hb6r37nk4ahqf-python-setup-hook.sh.drv<br>/nix/store/4j7gbzbahn5by6vvck1gcpjc95k6vpz6-Python-3.10.7.tar.xz.drv<br>/nix/store/9m54l1bi5814x9cqznwlga7yfs5ipi6h-nuke-refs.sh<br>/nix/store/pm08hy0dzswr0wj3n7nczm5pbzzjxdh6-darwin-sign-fixup.sh<br>/nix/store/4qmyys335vfbmyx2q8ii3md77yaswsim-nuke-references.drv<br>/nix/store/57kclla9vza2n87xgwg1ap54d20cz6lb-fix-finding-headers-when-cross-compiling.patch<br>/nix/store/aafa965mg7grhivxa01mmbqksz6c3w77-python-3.x-distutils-C++.patch<br>/nix/store/cv1ynpzvjjr0s72jkbblbzz3ymr87lpi-0001-On-all-posix-systems-not-just-Darwin-set-LDSHARED-if.patch<br>/nix/store/dkb2rjyj7lwmvsn4zzwx85kx8r61nk9w-darwin-libutil.patch<br>/nix/store/w7hflmy5kddj6p1kvbkgag7qjs44217d-libffi-3.4.3.tar.gz.drv<br>/nix/store/nv7ln6adf9vv2c81rw1rv8sarp2w3dbp-libffi-3.4.3.drv<br>/nix/store/r112dk8w7zvdjipki58ch00m825li7fq-virtualenv-permissions.patch<br>/nix/store/x6aiw4vay2b63slqz5byimn0alhg5b1s-darwin-tcl-tk.patch<br>/nix/store/70zdg3iypjrxjyvj602ai92j36j8l4rp-python3-minimal-3.10.7.drv<br>/nix/store/1qrnbw8xsww3vydd71lwfp32ylgx9i8g-make-wrapper.sh<br>/nix/store/819fzxfwzp7zhhi4wy5nkapimkb1bsx5-die.sh<br>/nix/store/csphakh9ck533qnjfqmrh5ybg7amwvwv-hook.drv<br>/nix/store/scgakk3jkkkqfzxp5v9575163dj03c2y-hook.drv<br>/nix/store/8p4sgrqajxwzcm9l02m45qvpg6ncr0h9-patchutils-0.3.3.drv<br>/nix/store/baz2nahq7z7xxya1gi7in6a4msmvkbly-5b2d07a72670513e41b481a9d922c983a64027ca.patch.drv<br>/nix/store/frr6f2hq56j6b4wc0bsklaqskjsagqc0-utf8-xmlErrorFuncHandler.patch<br>/nix/store/vyh448kgn8qx2frx4g42f64b1akic218-libxml2-2.10.0.tar.xz.drv<br>/nix/store/lyl7058saady3i75h1w0177qfzfr1zf0-ncurses-6.3-20220507.tgz.drv<br>/nix/store/wy5amsi09scnbxgsbm1fzzq9963zlg9m-ncurses-6.3-p20220507.drv<br>/nix/store/x1fa0bns4szjkbb7f8bsflcxmzas41h0-4ad71c2d72beef0d10cf75aa417db10d77846f75.patch.drv<br>/nix/store/9gql9xbn6mfd56lxxchd0q7qzyf7cdby-libxml2-2.10.0.drv<br>/nix/store/1nv6k9zyc7pj74yshdzm4bmjfv6k86l9-source.drv<br>/nix/store/34qn4by9lqrri323ahm5vizv6bgsbhfn-006-darwin-always-set-runtime-c-flag.diff<br>/nix/store/chhz1kdhnql7gshwrns13lawgm75an7c-adv_cmds-119.tar.gz.drv<br>/nix/store/bylhfm7hj9sm4qb5n9mnsvj71xhmi6rx-flex-2.6.4.tar.gz.drv<br>/nix/store/vila3sxd48ha6r4yhdbfzqlvfl1jn2bw-glibc-2.26.patch.drv<br>/nix/store/lnb1468vfblvbc6lqgpigypspa4lzl68-flex-2.6.4.drv<br>/nix/store/6s064qz2lzpi1ml9z4vx0ajmk7fwafv6-bsdmake-24.tar.gz.drv<br>/nix/store/pps2jxig0cgkz81qwhy9gqar360mbbdb-bsdmake-24.drv<br>/nix/store/x1dh5wnl7pf81iq0gx0gqj6i9vnz89vv-source.drv<br>/nix/store/icl9b9dikbnwsrb5agnjmfryxyjnfp1n-adv_cmds-119.drv<br>/nix/store/6wbmq1k5x7q9lchs986bjq2qf1ip7b41-ps-adv_cmds-119.drv<br>/nix/store/7qslhycy1d0ag13xn4rfxfwdm8f7afb1-001-search-path.diff<br>/nix/store/ar1p4gcvlqf8dwbkfrcb01srbywinaj5-check-pc-files-hook.sh<br>/nix/store/ha21dnn4nw858g8d0wrkvhyvp7zmqgnz-setup-hook.sh<br>/nix/store/jmif3w9zsykc13zrhw4y8pynnnxg27zn-cmake-3.24.2.tar.gz.drv<br>/nix/store/k845qxmkbra9fc4628lpi0q8yjmc1sx9-005-remove-systemconfiguration-dep.diff<br>/nix/store/ri7qddqm02y0w2g43zqqz8lzy2pbdgrk-002-application-services.diff<br>/nix/store/rq41inv92jszcs5x62nc5cci5hapbjpw-003-libuv-application-services.diff<br>/nix/store/23dflh1nkw215df7bfyy9ml3jd5ranrw-cmake-boot-3.24.2.drv<br>/nix/store/c14fh88kpi7gc627s1l19gdlipfrwd59-brotli-1.0.9.drv<br>/nix/store/rv3w6kch2d0l70r6h3kk2r5d8ca216hz-libobjc-11.0.0.drv<br>/nix/store/f07bc31w87jm2rjk8zap5xyf92ach79p-apple-framework-CoreFoundation-11.0.0.drv<br>/nix/store/k8xvsl4226pzy73ywglgx46h7scffpjq-gnu-config-2021-01-25.drv<br>/nix/store/h9gslm9dppn38plwa811yr5c03s5lw9w-ICU-66108.tar.gz.drv<br>/nix/store/mqvcwr74dcsqlib5crdcawk16dmdgj9h-ICU-66108.drv<br>/nix/store/rkr3wamhhf9ha9n89yimjwyazvf3ar6j-hook.drv<br>/nix/store/f0qv4kz20212qcnd9wsck36zk3r8isl9-curl-7.85.0.tar.bz2.drv<br>/nix/store/gdqnvkbp6nnrvww108adb7nvjgrpdxzb-7.79.1-darwin-no-systemconfiguration.patch<br>/nix/store/3bld52y6l8fg58gaj9b937qg6m7zbm16-krb5-1.20.tar.gz.drv<br>/nix/store/3xk9ps0qz073k641b88swpa4fgx3hzwg-nix-ssl-cert-file.patch<br>/nix/store/n3vnxwsnf75gz250yayipdga4ziidwpi-openssl-1.1.1q.tar.gz.drv<br>/nix/store/82cq1qadbgv5d6gxb11zgkxl530wvzxj-openssl-1.1.1q.drv<br>/nix/store/18vddqgdxg6xcv5iws1vv7fd152rag04-bootstrap_cmds-121.tar.gz.drv<br>/nix/store/jyci5k74rnj58fkalyil3pj28x7xnr3m-bootstrap_cmds-121.drv<br>/nix/store/hj7zxy2r8ib6s6fa669kr6hqdiv4l6s1-libkrb5-1.20.drv<br>/nix/store/z3h1d8wp61892ydalxldvb496ar0hiz6-libssh2-1.10.0.tar.gz.drv<br>/nix/store/zrh6il3gp9xa58ldg40d57kwgsvljyb1-openssl_add_support_for_libressl_3_5.patch<br>/nix/store/yf97cpb80lyvqgd0lnq82c4qkx7kpb9f-libssh2-1.10.0.drv<br>/nix/store/w5683845xkfzwlp8sgbax0farj5fzhpv-curl-7.85.0.drv<br>/nix/store/9rkj0y4cl1sbbzndzg01crdamv4813pg-bootstrap-stage2-stdenv-darwin.drv<br>/nix/store/labgzlb16svs1z7z9a6f49b5zi8hb11s-bash-5.1-p16.drv<br>/nix/store/hvl8g8b6n8m8dk16bdavvpg31g8zmk96-bootstrap-stage2-stdenv-darwin.drv<br>/nix/store/9lzpvga5gm5klwg28iv1hgf01g0hpfaa-hook.drv<br>/nix/store/96fgzfyknjaj6fc85ai2n68qfndbps02-hook.drv<br>/nix/store/6wky968nz63ndx7z6kppcada8cdj4hg8-bsdmake-24.drv<br>/nix/store/0w9k3ah3f9c0j7k4vxka74pi07x01bbv-adv_cmds-119.drv<br>/nix/store/2n3wbbh9sk778vkl1lsz58inmyvk2g3r-file-5.43.drv<br>/nix/store/bcv1p9lpghn2l1zcw21z7401qc8fnmvr-gnu-config-2021-01-25.drv<br>/nix/store/47msbw943yjc7hm6d13r9jl5cz0ih9x9-hook.drv<br>/nix/store/24a06br9jvy87sbanym8hijfq4j2dsqm-no-threads.patch<br>/nix/store/4a0sl25fn3ymdmaalxwvjk6a2xajy3cb-libcxxabi-11.1.0.src.tar.xz.drv<br>/nix/store/ccf2fg1l77aqbw3v8hiql7a4c54dr8lh-bootstrap-stage0-clang-wrapper-11.1.0.drv<br>/nix/store/bhmp58x5m3lkscnxs9zwscc4rxbz7fc4-bootstrap-stage2-stdenv-darwin.drv<br>/nix/store/db7hhqin9klk8qx344r2b3dhb4xrfiq6-llvm-11.1.0.src.tar.xz.drv<br>/nix/store/il3mvxijf7cc9ys09pcblff47ia93kk2-gnu-install-dirs.patch<br>/nix/store/z3pj61rk5h9ffbj5anhwbp3ah2qysvqf-libcxx-11.1.0.src.tar.xz.drv<br>/nix/store/fg68n6bycig5c23sw8yfn7nmgbj85v6x-libcxxabi-11.1.0.drv<br>/nix/store/wjgikzdk0fcbldspzlkyh0dvd8wa2say-patchutils-0.3.3.drv<br>/nix/store/3v9a47xl4w8kc8bff4daxvbg50008imh-19bc9ea480b60b607a3e303f20c7a3a2ea553369.patch.drv<br>/nix/store/c9w69kl4caarcs2j84hck0icrdj9jqr6-fix-darwin-dylib-names.sh<br>/nix/store/g958ikb42h89wl8rgx597l5h6k9n2cfx-fix-darwin-dylib-names-hook.drv<br>/nix/store/ym4y16msxvvpbcsc0s829has6v8mxg56-gnu-install-dirs.patch<br>/nix/store/hhn96pp2rk2bq1hipcr147hqfrgh80gk-libcxx-11.1.0.drv<br>/nix/store/rizgpw7ndpwy12kyr03mnlhhkfwzk75a-pcre-8.45.drv<br>/nix/store/m1pm94jj46gsmks3d11p44qdhqml9inm-gnugrep-3.7.drv<br>/nix/store/r2mi8209hbvfhyhjcxy6qqvyawf8s4k3-expand-response-params.drv<br>/nix/store/6yjiri44dy8c8lnjn0f14w8nvgs2fhf0-bootstrap-stage3-stdenv-darwin.drv<br>/nix/store/dlm9y4dfkjmcqrysf37kxfhlds9r9jng-hook.drv<br>/nix/store/q6x1zg4xsbzw7qv3qdcq2rny1n4pr5xk-hook.drv<br>/nix/store/iraif23i0p01sx6qq6jkry21v7g84wvi-bootstrap-stage0-clang-wrapper-11.1.0.drv<br>/nix/store/wpni47ni5xf8qms83in475fyn8z2ikf6-bootstrap-stage3-stdenv-darwin.drv<br>/nix/store/40ri4k2mfvs5wjwry47iqv30587p1jh0-patchutils-0.3.3.drv<br>/nix/store/0w90wllxcb2wyjbkxjacm0m3q2wfz702-uops-CMOV16rm-noreg.diff.drv<br>/nix/store/09q0yxa6ixb030mkw96j2za7h8dpbpc7-dejagnu-1.6.3.tar.gz.drv<br>/nix/store/fk7p458jm8ra2d6zf2y4nw1ykckvmnrr-tcl8.6.11-src.tar.gz.drv<br>/nix/store/5z49kw0iq4qyga5zxmmhw1fh2l6jiwjz-tcl-8.6.11.drv<br>/nix/store/g4c3jbhc8ag6db5py0xk2sicfy0hrpmw-tcl-package-hook.sh<br>/nix/store/a1ipqs2qcpbqyfmxgk6yi3yyl2f6pd62-tcl-package-hook.drv<br>/nix/store/4vq3350zc6sqnibkqpgic2d6cvi1r9hq-substitute-all.sh<br>/nix/store/5241l4i852qd9imqz3jgv9rv9gv701gk-fix-cross-compilation.patch<br>/nix/store/dhba38jjxia0b5snjrhvcl9dbjbdb3k0-fix-cross-compilation.patch.drv<br>/nix/store/gdag5rjmiv9iwgj8gnibcvzic5f1kwbp-0001-enable-cross-compilation.patch.drv<br>/nix/store/qcmyh5mgqv62zip6gkp2xjriklpbm0xv-expect5.45.4.tar.gz.drv<br>/nix/store/xpdirxij63a69jk43pgajjrgmv7gaajd-hook.drv<br>/nix/store/iag2icih50jb6wxn15a71jy9pix7jd15-expect-5.45.4.drv<br>/nix/store/nharms54shj3rhwzw2ywk4alfrgm5k1m-dejagnu-1.6.3.drv<br>/nix/store/2hc51kpv7vkbfpifjq28jbhm49wlphzw-libffi-3.4.3.drv<br>/nix/store/6wv8acdd7bm7npixgr3rk86mf55fj47c-llvm-config-link-static.patch<br>/nix/store/9fcwwdr92g5wzpj2wxf86f0zy5mn0h1v-zlib-1.2.12.drv<br>/nix/store/9fd3xdcfv1dw93y99a18lw735fx8kvgy-gnu-install-dirs.patch<br>/nix/store/g05jynqyglkf9if6y70822l2r6y3nkj5-ncurses-6.3-p20220507.drv<br>/nix/store/2mys4xnihsf6r5y0sbby0y3qcn22ggjw-4ad71c2d72beef0d10cf75aa417db10d77846f75.patch.drv<br>/nix/store/2nyygvchsc258gkqymnbzmh741wsizrf-libiconv-50.drv<br>/nix/store/i68qy2hwsvqx3haf36smqi3n4lg1wavm-5b2d07a72670513e41b481a9d922c983a64027ca.patch.drv<br>/nix/store/w8ma9ddjcfc3l3z4ng6rlwljxiw85fhv-hook.drv<br>/nix/store/j4h65frq4nx4kpl06sj5c3cz2lc9fdrz-libxml2-2.10.0.drv<br>/nix/store/kl8l1ci2ycc6y23vkxvjhlbz2p93zp3z-polly-11.1.0.src.tar.xz.drv<br>/nix/store/n1sl525i7qanfd75l8s1bbqn32fasma0-dfaemitter-gcc-12.patch.drv<br>/nix/store/qcb7ljbcrmgdf6xv0irgvdv6rivgj3md-nvptx-gcc-12.patch.drv<br>/nix/store/yzac3dpyb5cyndxjl0d9nrpwqmcz18dk-b498303066a63a203d24f739b2d2e0e56dca70d1.patch.drv<br>/nix/store/8vqfrpgwki8j8nk9j08g04vh1iqcm9bw-llvm-11.1.0.drv<br>/nix/store/2jlsizsg3hsj6p10cm11fx9rshsjwwri-clang-tools-extra-11.1.0.src.tar.xz.drv<br>/nix/store/34zhl915l308dpa7v2786z3xgbvy6398-purity.patch<br>/nix/store/akc6qlr586k4r5lwmj70i0mbb8wxz709-clang-11.1.0.src.tar.xz.drv<br>/nix/store/v2az1r12rfivd43pvq2s0brp60n54mqa-clang-11-12-LLVMgold-path.patch<br>/nix/store/bhdlpz3fgkzcrh94rsp76m0n0gwb6fxx-clang-11-12-LLVMgold-path.patch.drv<br>/nix/store/f91k74rxz9c8miqg843jf6dfq35jhpka-fix-darwin-dylib-names-hook.drv<br>/nix/store/yrskcbyfm56qm4vs9dnacg8mqpqx7qwx-gnu-install-dirs.patch<br>/nix/store/arqis7aqh6b9p3a90idcjnr21fp1d0c4-clang-11.1.0.drv<br>/nix/store/79xln4yb0zql3j1zvc72yfi1y6333crl-disable-rpath.patch<br>/nix/store/dvdql179kllliqznwkd307bvdny2h96h-source.drv<br>/nix/store/5ks4wyqmh20wzz3i2yyqky7g0g8jhmsk-libtapi-1100.0.11.drv<br>/nix/store/aipzgrzywrh1qgw2l3bigbnnwpyr61kn-source.drv<br>/nix/store/fz56qb3cymbf2acghsqmdgjwwklc411f-install-shell-files.drv<br>/nix/store/r9iy2wdkq3w0n1hbyg92c2sqg3vcbkhl-ld-ignore-rpath-link.patch<br>/nix/store/3jjd65b6nyg7g30ixszjcsgb08j5mmhn-0001-Add-useless-descriptions-to-AC_DEFINE.patch<br>/nix/store/f3ygraph3msfdkyrqg91j7smx1c78qnd-bzip2-1.0.8.drv<br>/nix/store/j3frsgc0zsrg2pg7w9pqmxjh6qd01aqs-0002-Use-pkg-config-for-libxml2.patch<br>/nix/store/y26ic2b9n1g1cng3s68753qcxd6fvqrq-xz-5.2.6.drv<br>/nix/store/yqdd6m0r80c5pn3z7wc1mhn1wqmyli4i-xar-1.6.1.tar.gz.drv<br>/nix/store/1m30bskfc8z8r4dhb2qv9sd7jyl92srx-xar-1.6.1.drv<br>/nix/store/7vs1bbfsk0w6p6n5c4bqs3mp7q6n9lyd-source.drv<br>/nix/store/paybkfdbyh40jzyv6l5ywsbaabqy1sav-pbzx-1.0.2.drv<br>/nix/store/vwlpvn89jh6h45dj8q9nin0iv7rw85qb-MacOSX-SDK-11.0.0.drv<br>/nix/store/vb56s92027cg2c6573dahs6830fhz9xk-libobjc-11.0.0.drv<br>/nix/store/zr59kiajvksmks3vl1hja2ybix9z2zqk-ld-rpath-nonfinal.patch<br>/nix/store/ldj50kzrjbzh8dzcb7mqqa5gqsmc33v9-cctools-port-949.0.1.drv<br>/nix/store/0df8rz15sp4ai6md99q5qy9lf0srji5z-0001-Revert-libtool.m4-fix-nm-BSD-flag-detection.patch<br>/nix/store/k1cgpjsl77c8wfaq0w7n6k1i7fvxr5p8-gas-dwarf-zero-PR29451.patch<br>/nix/store/lgniihp1bk6mkd5nn9y5ikfim2ignr52-0001-libtool.m4-update-macos-version-detection-block.patch<br>/nix/store/pa83jbilxjpv5d4f62l3as4wg2fri7r7-always-search-rpath.patch<br>/nix/store/dqgzlxvbzq4dih9ska9k0y91sc1kv7d9-autoconf-2.69.tar.xz.drv<br>/nix/store/s8wb99pw1w8yspcz26zfadsy0j1k70ww-autoconf-2.69.drv<br>/nix/store/sqbhaaayam0xw3a3164ks1vvbrdhl9vq-deterministic.patch<br>/nix/store/xrw086zw3xqsvy9injgil8n2qdkvkpff-0001-Revert-libtool.m4-fix-the-NM-nm-over-here-B-option-w.patch<br>/nix/store/zbdl2p9amxdkr9cqjq0yv6h0mr55lm3l-binutils-2.39.tar.bz2.drv<br>/nix/store/zki7kfvf2f0xdksq9hp004xz1hsxklz3-texinfo-6.8.drv<br>/nix/store/q1kz46q80wj4bfc314g5p3sylpilpv0i-binutils-2.39.drv<br>/nix/store/00fij0grbvf9svcxvyk5ys51qcpmk7sa-cctools-binutils-darwin-949.0.1.drv<br>/nix/store/17agldwh525770zc3w11sdkpdxq8xwjy-gnu-config-2021-01-25.drv<br>/nix/store/0kkx3whrs8zb85qwwvl42ax99hmk0xpz-pcre-8.45.drv<br>/nix/store/3qkad2sv1xwngyn4gmx473mzrjhs2jx8-gnugrep-3.7.drv<br>/nix/store/xn8bjkw4fmyr2xvk9higd54g9s7q2kdz-gmp-with-cxx-6.2.1.drv<br>/nix/store/hbby7876a2qhk93hlx5ppr3jpgm1lwkl-coreutils-9.1.drv<br>/nix/store/vj0ai85srlbfn0yvd6mdql2nxan24naa-post-link-sign-hook.drv<br>/nix/store/vsd7hdcfnzn5n4q44flcdiaa2lv58d6d-signing-utils.drv<br>/nix/store/z4gcxwcrzc0mkx0zgha8k4jr506kgns7-expand-response-params.drv<br>/nix/store/vnxdn7rjmsm0naz6sgb98flh437iff1g-cctools-binutils-darwin-wrapper-949.0.1.drv<br>/nix/store/5gm6pb695hmb0q26cyvmm0ish0p5yig0-clang-wrapper-11.1.0.drv<br>/nix/store/2cw54rrcb7plvq6v5hxsm3sb42kq6fk5-bootstrap-stage3-stdenv-darwin.drv<br>/nix/store/3ic95d8vv23cdj4vq7634zh5zcdsda1p-normalize-var.patch<br>/nix/store/3m53ki7pr92hacq8mghsldg1wc4wrifm-codesign.patch<br>/nix/store/706qcmh667cmjwffc4vbjs9c745c7hs0-gnu-install-dirs.patch<br>/nix/store/skwzly3754w50q8mzdpadz8bsfmn6hs8-compiler-rt-11.1.0.src.tar.xz.drv<br>/nix/store/y87vwjq5v1fi0d077xqrsnkqrax3p4iz-libsanitizer-no-cyclades-11.patch<br>/nix/store/ylv0v02l6panidz2hkh756fz363yc68h-X86-support-extension.patch<br>/nix/store/1ffkl3b9gb1qyvmz2r1633vzkhd5bxn2-compiler-rt-libc-11.1.0.drv<br>/nix/store/9k3fqaqk3k7m510nn57ynd4ngx2x4rxs-clang-wrapper-11.1.0.drv<br>/nix/store/mmdgxk0mpsq2lzlja8g6mrdjzxpc3wmq-hook.drv<br>/nix/store/s9rdswvsx68yjwfk57vlw5a34hbjsl2v-source.drv<br>/nix/store/hrp64mrc7ss3zz8gfl36jfq8fj8qwk2b-libyaml-0.2.5.drv<br>/nix/store/y7wqq0qnhnhd6hr5d2hxl967fjssfrny-source.drv<br>/nix/store/vy20n6yc3nd8d1yk0sqa6cah7dpyhv9s-rewrite-tbd-20201114.drv<br>/nix/store/sn11j0j89hflj7snivdlxvxawvrpzp01-apple-framework-CoreFoundation-11.0.0.drv<br>/nix/store/aawhsgywk753j170584pf3r6rlismpi6-bootstrap-stage4-stdenv-darwin.drv<br>/nix/store/qwxrck5ibwhhhsgyblc711vnvw5rx2ib-bootstrap-stage4-stdenv-darwin.drv<br>/nix/store/bs639bs7frzx60c8bh3nyzmak49zbc3k-hook.drv<br>/nix/store/cfkvf8l9jw3vrvkss3c5i1ccgnp86nv6-hook.drv<br>/nix/store/skm4ysx9pk4nnwx75fpk9vghzc130887-perl-5.36.0.drv<br>/nix/store/ma5p31xpqrcyk0z70l14m7cklw2zkb5s-patchutils-0.3.3.drv<br>/nix/store/lapsha9pivk9wvrwlrc482i2biq06gw5-CVE-2021-38185-2.patch.drv<br>/nix/store/ncfbi3qgbflyph4x2ngcnz2584kykzqa-CVE-2021-38185-1.patch.drv<br>/nix/store/pklid951p82izlw5f06w5yvpps1zwgxw-CVE-2021-38185-3.patch.drv<br>/nix/store/sp2alvzdl09796wpg2wdf68akiha4d4g-fno-common-fix.patch.drv<br>/nix/store/zmadr12vmal7mwlgy1w4w4x70lss6j73-cpio-2.13.tar.bz2.drv<br>/nix/store/d54hwx5g50niakv2lpb9lkp1jjk910q1-cpio-2.13.drv<br>/nix/store/4yn89klg688jxj8sidmzc84hl7ndcwkm-pkg-config-0.29.2.drv<br>/nix/store/416vhsxki7508q1ijs8n415fqmvjxyky-pkg-config-wrapper-0.29.2.drv<br>/nix/store/a736nzx1nigikprmk4ignqzndmz7ls0m-gettext-0.21.drv<br>/nix/store/2szis9v9c9dzazajlflfdc9jl3b0pihg-gnum4-1.4.19.drv<br>/nix/store/gbznai4iy45kxmlnrn56fn5m0x2rlspc-texinfo-6.8.drv<br>/nix/store/f33p3mlclvl3hhnnjsnzw70bshn7criz-autoconf-2.71.drv<br>/nix/store/dw19klga9vppaq2f6lzj9h7bl4c29mga-automake-1.16.5.drv<br>/nix/store/hizv414b6ky026kw5f4hwgm2lbxzh08y-perl5.36.0-gettext-1.07.drv<br>/nix/store/ccwg6bkak9j236lc6k0n713iyn12k996-help2man-1.49.2.drv<br>/nix/store/jx8mci3vwqi9qv1wkbrfpjya00nl285j-file-5.43.drv<br>/nix/store/lahdhba85rpm60wxmhxanq1dqi8sa5kb-libtool-2.4.7.drv<br>/nix/store/g69zz30gq1rb85b6kdz5iidxxbwp1bda-hook.drv<br>/nix/store/hb2yk99cw015si2ry1l1fygp365as523-openssl-3.0.5.drv<br>/nix/store/cv65milx0bs2fk1xikgrgrhvkafkpqdk-xar-1.6.1.drv<br>/nix/store/9wfpm5alc542isr7232gg4qg5njdsgdq-unzip-6.0.drv<br>/nix/store/ggp35l799v2ggwsk73sz61y7wg3kpqy1-source.drv<br>/nix/store/msvf870j9sr6lwzakv6m263gk0r7126z-pbzx-1.0.2.drv<br>/nix/store/0b2hxys6lxyh567j82addkw2k36qjzgz-MacOSX-SDK-11.0.0.drv<br>/nix/store/0c1ijhg1cq01zcrvnhg24vhm5qn47kwd-libev-4.33.drv<br>/nix/store/0fqp7dz3rlrrhqjfc69wkmii3j5y0g7d-make-4.3.tar.gz.drv<br>/nix/store/bqlikyzhzhsjfirhzgmps9p99mhvn9az-bison-3.8.2.drv<br>/nix/store/c3kdwmns3lyigqqm6c4czisv0n226dy7-source.drv<br>/nix/store/hp3krbr0v290hwgrcskls6kk545virpz-flex-2.6.4.drv<br>/nix/store/mdihpwmpbkv1wg4yw03d7wy3fbs0l45w-bsdmake-24.drv<br>/nix/store/ln3xll7z1avhm03k3m8cdllln7wdgrrk-adv_cmds-119.drv<br>/nix/store/gs103r2mxcsjs3sw0ibvlnsv54qcw9q6-ps-adv_cmds-119.drv<br>/nix/store/94y4s4a30p8qqfg8bxr9rgwkdc9m3610-cmake-boot-3.24.2.drv<br>/nix/store/n91acyjrlchm0snw0w16i4683pf788ax-playtests-darwin.patch<br>/nix/store/vfb2ll7c9aq63mlkkvmvfq4ibiinq5nh-source.drv<br>/nix/store/vhp9nf4r8328m91l9l5c8fd9wlmb4bnd-fix-darwin-dylib-names-hook.drv<br>/nix/store/0w2r0sw68fwxqqki50mqx83iz1q6clgq-zstd-1.5.2.drv<br>/nix/store/4rj3r6gga5ipdfkiw9ahmrj9yr411ry6-libobjc-11.0.0.drv<br>/nix/store/vc3jlishkiy0qsw95smzzzr9vcgafi56-source.drv<br>/nix/store/jhs384scb8wk3sn9dw92khjpay91x9mg-libtapi-1100.0.11.drv<br>/nix/store/ylsnxqqfn3gpp0wr133z4ksj2bhklrg7-source.drv<br>/nix/store/z8gyza1abwd7jh3pv10r6kcrgphi2h2r-install-shell-files.drv<br>/nix/store/0xwx3m2lvpw92w4j45n1772f3aimskxg-cctools-port-949.0.1.drv<br>/nix/store/0y5flakfvnf813cwrr8rygf1jnk0gfnc-CVE-2019-13636.patch<br>/nix/store/4r8s8hcwyvvvnpcncps09zscqkh5qapx-no-install-statedir.patch<br>/nix/store/bljrd66ff2vp1zqikdfrz5x0k90kaw81-findutils-4.9.0.tar.xz.drv<br>/nix/store/10zrhmiqirncfbxyac8xrjg6p8mqf30k-findutils-4.9.0.drv<br>/nix/store/53d5wfhiifvxzgj847fva6q6py02m1g1-expand-response-params.drv<br>/nix/store/c2yrfg597pjcl1867pyir9jiq4fw3jl4-source.drv<br>/nix/store/9h8631c24qp90y7w0fvsl3c0dv8pv6pi-sigtool-0.1.2.drv<br>/nix/store/anpnd9wprrqhf1fdcwy96j66vb5fcsii-signing-utils.drv<br>/nix/store/5xzxmr5xpnqx0b0ar0kpy7kw0282a1jc-autoconf-2.69.drv<br>/nix/store/a921f1jk651ahri5f05gca9rwdiq3rlz-binutils-2.39.drv<br>/nix/store/laack7baw4rfxgvyqfrfydbn1v8zz9b6-clang-11-12-LLVMgold-path.patch.drv<br>/nix/store/d7h3zix26zzgdp0rzsyb19hrif8cbzmz-clang-11.1.0.drv<br>/nix/store/jxpxgb5hph4lw3s12g7lyqz0ci8a37ra-cctools-binutils-darwin-949.0.1.drv<br>/nix/store/w3hhid4crxafa1j03iq4a1y30d8p0sk2-post-link-sign-hook.drv<br>/nix/store/5w0k8f3ialhwr7p5g0y94zny3j74ryzn-cctools-binutils-darwin-wrapper-949.0.1.drv<br>/nix/store/74fhpxplxsc5qg1c67hb5picw88flx3d-libssh2-1.10.0.drv<br>/nix/store/76nc36kgrvhx8n9m8jz7ywrrqbcdkr48-gnu-config-2021-01-25.drv<br>/nix/store/9wyqdma0i671db7l4m0a3qbp6jpza2vi-tar-1.34.tar.xz.drv<br>/nix/store/90phqk429ip6kbi5jlm0lcg4h2xxaq2k-gnutar-1.34.drv<br>/nix/store/2j0fmwgm5ybgnc8jprc4ypcxw6s4r2nv-Allow_input_files_to_be_missing_for_ed-style_patches.patch<br>/nix/store/7mq3l9rhjbmpf06fwnrp51q6sy1l6g9j-patch-2.7.6.tar.xz.drv<br>/nix/store/8p3z4jsrxr5ck92iasc9bc7bmapb5mmg-CVE-2018-6951.patch<br>/nix/store/h2fcbw7ghgn3i4qadszdp272w4dab7ln-lzip-setup-hook.sh<br>/nix/store/vvciv7wkw3z9x0bj4jszb31crk0lix8y-lzip-1.23.tar.gz.drv<br>/nix/store/6gj38dbipcd2vbjcsv028jmpnn6bv1sz-lzip-1.23.drv<br>/nix/store/bv0xxgk72g693vdgs3w2w3d252hlxys9-ed-1.18.tar.lz.drv<br>/nix/store/lmssb21nd3zkv5gssngmk92bdf0q4h1w-ed-1.18.drv<br>/nix/store/npqvgz8c8w9kpj1gdma5bbn0pdkisyzp-CVE-2018-6952.patch<br>/nix/store/rxgi2l6jrgd5xmrrsbcv5cwi558lb36m-CVE-2019-13638-and-CVE-2018-20969.patch<br>/nix/store/sz6rhpf50kqh75fhqwl75q6dm6fr9xyd-CVE-2018-1000156.patch<br>/nix/store/aqmy225ay8m4yg51mib0bkpz3r1w2z7j-patch-2.7.6.drv<br>/nix/store/2k52bklbjhhq47dn35gm833vlh06fgfn-0001-No-impure-bin-sh.patch<br>/nix/store/6cc64ayl3fd2nc28ffw47cqsqi2bg1sn-0002-remove-impure-dirs.patch<br>/nix/store/avhna3r651j0frjk7jhy771za84mlh4j-gnumake-4.3.drv<br>/nix/store/b7mkkj1kbaxpihqh3k12s4a3viz9pdvk-hook.drv<br>/nix/store/dy63w31j33lknbd95fl81f24sndlgf35-source.drv<br>/nix/store/bl8jncx9dy4rr54cn8p1vwpf3wa01yyj-brotli-1.0.9.drv<br>/nix/store/rp4wqqv22pjl2235ra7ag3nb7yy0b5kr-diffutils-3.8.tar.xz.drv<br>/nix/store/d554acfihg4ssgij79ybd6ls0ww1p14x-diffutils-3.8.drv<br>/nix/store/szfjhkhmsxfyc289vz39882d3l866888-fix-error-darwin.patch<br>/nix/store/z8912zv98rl5yv104mf99j3k72xva3nr-libidn2-2.3.2.tar.gz.drv<br>/nix/store/qhs49gbxssyr8im8h2xc058gh4kdndv6-libunistring-1.0.tar.gz.drv<br>/nix/store/zipavm2mq94fsw09kx9mw7pi5n8xhkp4-libunistring-1.0.drv<br>/nix/store/gzy4kvn6djdm9b631fcm3g76pijsvvq7-libidn2-2.3.2.drv<br>/nix/store/hvp22x3rmpwfj6kcf0hj9dcv8lrkd4hs-clang-wrapper-11.1.0.drv<br>/nix/store/xhmwfi4xij5ryg9x2j0n6067ki55dscr-c-ares-1.18.1.drv<br>/nix/store/qpsbvsn7dl8gmlsmh474m2h9gmh8mg7i-nghttp2-1.49.0.drv<br>/nix/store/lwhmzpa1py1k244hfd3l026kc7r7b6ib-sed-4.8.tar.xz.drv<br>/nix/store/rvq62srcss99303nbgr94bq4av9kjv8q-gnused-4.8.drv<br>/nix/store/pid9is7y02wzdplvk6jcw2n0vfdh2y32-openssl-1.1.1q.drv<br>/nix/store/pz4hlrs0xa3q9knmn83v8v3wpf88iigz-bootstrap_cmds-121.drv<br>/nix/store/6m3w5kmj2m73nj3pakh6kaqjs2k64p5m-libkrb5-1.20.drv<br>/nix/store/sa6lxl61bh1wmr9rbpbyiq5wg2y5kbf2-curl-7.85.0.drv<br>/nix/store/vff2y41m68f5garsjmjxc0xfjrvw9pfm-setup-hook.drv<br>/nix/store/w99jp1rsykvc8rb09hr03c0rakw2dgzc-gzip-1.12.tar.xz.drv<br>/nix/store/swj6qdzryq4ln3h172s4h45wf0ks7g4j-gzip-1.12.drv<br>/nix/store/v994hjy8kmwi7g5li2lrpss92ldj0a54-ICU-66108.drv<br>/nix/store/pmxi9k28qls2yr7jhfnz3qp1fjchy64m-gawk-5.1.1.tar.xz.drv<br>/nix/store/x9ndmqlkrngf4jdy4zmvmal9ma7gh3z0-gawk-5.1.1.drv<br>/nix/store/5pfijbmkmy5kc81yzp0lpm4gpm2aq5rk-source.drv<br>/nix/store/zf7v9n0hxgb302wf08y762s0rhsbnqd2-source.drv<br>/nix/store/qr3r1g7n6xppyxb88726z7yr6r246nzd-libyaml-0.2.5.drv<br>/nix/store/91bfp6zivp9jq9sqq6iqq7vdpghdaffa-rewrite-tbd-20201114.drv<br>/nix/store/ya29pfy418vy1l0i5symnyprdb80c8ha-apple-framework-CoreFoundation-11.0.0.drv<br>/nix/store/cdk3pz11mvhqpphr0197wwmzhqppn7rl-stdenv-darwin.drv<br>/nix/store/26z459l0k3znhr99dsshkzj0il8dhwxx-perl-5.36.0.drv<br>/nix/store/sbcibnd6hym9c2rlbfnyhrbmlvgmsa59-stdenv-darwin.drv<br>/nix/store/sr9iyw9n2awaikjzvjfgwhvvn6vimf5w-pkg-config-0.29.2.drv<br>/nix/store/3zmkapnjbnajncxw7cix0lmj1fbspwa0-pkg-config-wrapper-0.29.2.drv<br>/nix/store/7dlkjg6cyd8d47qwiamxi77hld2z5360-mirrors-list.drv<br>/nix/store/i0zc5mm4vpj3lviyydb9s73j53mypkrg-nghttp2-1.49.0.drv<br>/nix/store/w37b5s734m53gxnzqyb5v0v98mhdfg2i-coreutils-9.1.drv<br>/nix/store/mmsrbggvzn6rwlx1ijw90sw3wvhzj18j-openssl-3.0.5.drv<br>/nix/store/n7iibs6b818v402j0yczf4mgy73sbzpv-libssh2-1.10.0.drv<br>/nix/store/z074ki54p77r7db3wsgxh9p18f67xnv8-curl-7.85.0.drv<br>/nix/store/hwymznwkd1kgf5ldcldjl9bnc1wz2azb-hello-2.12.1.tar.gz.drv<br>/nix/store/4a78f0s4p5h2sbcrrzayl5xas2i7zq1m-hello-2.12.1.drv</code></pre></details><p>The above command not only lists the build-time dependencies for the <code>hello</code> package, but also their transitive build-time dependencies. In other words, these are all the derivations needed to build the <code>hello</code> package “from scratch” in the absence of any cache products. We can see the complete tree of build-time dependencies like this:</p><div class=\"sourceCode\" id=\"cb16\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb16-1\"><a href=\"#cb16-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix-store <span class=\"at\">--query</span> <span class=\"at\">--tree</span> <span class=\"st\">&quot;</span><span class=\"va\">${DERIVATION}</span><span class=\"st\">&quot;</span></span><br><span id=\"cb16-2\"><a href=\"#cb16-2\" tabindex=\"-1\"></a><span class=\"ex\">/nix/store/4a78f0s4p5h2sbcrrzayl5xas2i7zq1m-hello-2.12.1.drv</span></span><br><span id=\"cb16-3\"><a href=\"#cb16-3\" tabindex=\"-1\"></a><span class=\"ex\">├───/nix/store/9krlzvny65gdc8s7kpb6lkx8cd02c25b-default-builder.sh</span></span><br><span id=\"cb16-4\"><a href=\"#cb16-4\" tabindex=\"-1\"></a><span class=\"ex\">├───/nix/store/labgzlb16svs1z7z9a6f49b5zi8hb11s-bash-5.1-p16.drv</span></span><br><span id=\"cb16-5\"><a href=\"#cb16-5\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   ├───/nix/store/7kcayxwk8khycxw1agmcyfm9vpsqpw4s-bootstrap-tools.drv</span><br><span id=\"cb16-6\"><a href=\"#cb16-6\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   ├───/nix/store/3glray2y14jpk1h6i599py7jdn3j2vns-mkdir.drv</span><br><span id=\"cb16-7\"><a href=\"#cb16-7\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   ├───/nix/store/50ql5q0raqkcydmpi6wqvnhs9hpdgg5f-cpio.drv</span><br><span id=\"cb16-8\"><a href=\"#cb16-8\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   ├───/nix/store/81xahsrhpn9mbaslgi5sz7gsqra747d4-unpack-bootstrap-tools-<span class=\"op\">&gt;</span></span><br><span id=\"cb16-9\"><a href=\"#cb16-9\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   ├───/nix/store/fzbk4fnbjqhr0l1scx5fspsx5najbrbm-bootstrap-tools.cpio.bz<span class=\"op\">&gt;</span></span><br><span id=\"cb16-10\"><a href=\"#cb16-10\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   ├───/nix/store/gxzl4vmccqj89yh7kz62frkxzgdpkxmp-sh.drv</span><br><span id=\"cb16-11\"><a href=\"#cb16-11\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   └───/nix/store/pjbpvdy0gais8nc4sj3kwpniq8mgkb42-bzip2.drv</span><br><span id=\"cb16-12\"><a href=\"#cb16-12\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   ├───/nix/store/3lhw0v2wyzimzl96xfsk6psfmzh38irh-bash51-007.drv</span><br><span id=\"cb16-13\"><a href=\"#cb16-13\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   ├───/nix/store/7kcayxwk8khycxw1agmcyfm9vpsqpw4s-bootstrap-tools.drv [..<span class=\"op\">&gt;</span></span><br><span id=\"cb16-14\"><a href=\"#cb16-14\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   ├───/nix/store/nbxwxwqwcr9rrmxb6gb532f18102815x-bootstrap-stage0-stdenv<span class=\"op\">&gt;</span></span><br><span id=\"cb16-15\"><a href=\"#cb16-15\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/1i5y55x4b4m9qkx5dqbmr1r6bvrqbanw-multiple-outputs.sh</span><br><span id=\"cb16-16\"><a href=\"#cb16-16\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/59jmzisg8fkm9c125fw384dqq1np602l-move-docs.sh</span><br><span id=\"cb16-17\"><a href=\"#cb16-17\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/7kcayxwk8khycxw1agmcyfm9vpsqpw4s-bootstrap-tools.drv<span class=\"op\">&gt;</span></span><br><span id=\"cb16-18\"><a href=\"#cb16-18\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/bnj8d7mvbkg3vdb07yz74yhl3g107qq5-patch-shebangs.sh</span><br><span id=\"cb16-19\"><a href=\"#cb16-19\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/cickvswrvann041nqxb0rxilc46svw1n-prune-libtool-files<span class=\"op\">&gt;</span></span><br><span id=\"cb16-20\"><a href=\"#cb16-20\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/ckzrg0f0bdyx8rf703nc61r3hz5yys9q-builder.sh</span><br><span id=\"cb16-21\"><a href=\"#cb16-21\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/fyaryjvghbkpfnsyw97hb3lyb37s1pd6-move-lib64.sh</span><br><span id=\"cb16-22\"><a href=\"#cb16-22\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/g8xg0i02aqwhgxwd2vnp5ax3d6lrkg1v-strip.sh</span><br><span id=\"cb16-23\"><a href=\"#cb16-23\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/jngr4r80x5jn482ckqrfh08ljrx1k86f-setup.sh</span><br><span id=\"cb16-24\"><a href=\"#cb16-24\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/kd4xwxjpjxi71jkm6ka0np72if9rm3y0-move-sbin.sh</span><br><span id=\"cb16-25\"><a href=\"#cb16-25\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/kxw6q8v6isaqjm702d71n2421cxamq68-make-symlinks-relat<span class=\"op\">&gt;</span></span><br><span id=\"cb16-26\"><a href=\"#cb16-26\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/m54bmrhj6fqz8nds5zcj97w9s9bckc9v-compress-man-pages.<span class=\"op\">&gt;</span></span><br><span id=\"cb16-27\"><a href=\"#cb16-27\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/ngg1cv31c8c7bcm2n8ww4g06nq7s4zhm-set-source-date-epo<span class=\"op\">&gt;</span></span><br><span id=\"cb16-28\"><a href=\"#cb16-28\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   └───/nix/store/wlwcf1nw2b21m4gghj70hbg1v7x53ld8-reproducible-builds<span class=\"op\">&gt;</span></span><br><span id=\"cb16-29\"><a href=\"#cb16-29\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   ├───/nix/store/i65va14cylqc74y80ksgnrsaixk39mmh-mirrors-list.drv</span><br><span id=\"cb16-30\"><a href=\"#cb16-30\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/7kcayxwk8khycxw1agmcyfm9vpsqpw4s-bootstrap-tools.drv<span class=\"op\">&gt;</span></span><br><span id=\"cb16-31\"><a href=\"#cb16-31\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   ├───/nix/store/nbxwxwqwcr9rrmxb6gb532f18102815x-bootstrap-stage0-st<span class=\"op\">&gt;</span></span><br><span id=\"cb16-32\"><a href=\"#cb16-32\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   │   └───/nix/store/ycwm35msmsdi2qgjax1slmjffsmwy8am-write-mirror-list.sh</span><br><span id=\"cb16-33\"><a href=\"#cb16-33\" tabindex=\"-1\"></a><span class=\"ex\">│</span>   │   └───/nix/store/lphxcbw5wqsjskipaw1fb8lcf6pm6ri6-builder.sh</span><br><span id=\"cb16-34\"><a href=\"#cb16-34\" tabindex=\"-1\"></a><span class=\"ex\">…</span></span></code></pre></div><p>If we were to build and cache all of these build-time dependencies then our local <code>/nix/store</code> and cache would explode in size. Also, we do <em>not</em> need to do this because there is a better solution …</p><h4 id=\"correct-solution\">Correct solution</h4><p>The solution that provides the best value is to cache all transitive build-time dependencies <em>that are present within the current <code>/nix/store</code></em> after building the top-level build product. In other words, don’t bother to predict which build-time dependencies we need; instead, empirically infer which ones to cache based on which ones Nix installed and used along the way.</p><p>This is not only more accurate, but it’s also more efficient: we don’t need to build or download anything new because we’re only caching things we already locally installed.</p><p>As a matter of fact, the <code>nix-store</code> command already supports this use case quite well. If you consult the documentation for the <code>--requisites</code> flag, you’ll find this gem:</p><pre><code>       • --requisites; -R<br>         Prints out the closure (../glossary.md) of the store path paths.<br><br>         This query has one option:<br><br><br>         • --include-outputs Also include the existing output paths of store<br>           derivations, and their closures.<br><br>         This query can be used to implement various kinds of deployment. A<br>         source deployment is obtained by distributing the closure of a store<br>         derivation. A binary deployment is obtained by distributing the closure<br>         of an output path. A cache deployment (combined source/binary<br>         deployment, including binaries of build-time-only dependencies) is<br>         obtained by distributing the closure of a store derivation and<br>         specifying the option --include-outputs.</code></pre><p>We’re specifically interested in a “cache deployment”, so we’re going to do exactly what the documentation says and use the <code>--include-outputs</code> flag in conjunction with the <code>--requisites</code> flag. In other words, the <code>--include-outputs</code> flag was expressly created for this use case!</p><p>So here is the simplest, but least robust, version of the script for computing the set of build-time dependencies to cache, as a Bash array:</p><div class=\"sourceCode\" id=\"cb18\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb18-1\"><a href=\"#cb18-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> <span class=\"co\"># Continue reading before using this code; there's a more robust version later</span></span><br><span id=\"cb18-2\"><a href=\"#cb18-2\" tabindex=\"-1\"></a></span><br><span id=\"cb18-3\"><a href=\"#cb18-3\" tabindex=\"-1\"></a><span class=\"ex\">$</span> <span class=\"co\"># Optional: Perform the build if you haven't already</span></span><br><span id=\"cb18-4\"><a href=\"#cb18-4\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix build <span class=\"st\">&quot;</span><span class=\"va\">${BUILD}</span><span class=\"st\">&quot;</span></span><br><span id=\"cb18-5\"><a href=\"#cb18-5\" tabindex=\"-1\"></a></span><br><span id=\"cb18-6\"><a href=\"#cb18-6\" tabindex=\"-1\"></a><span class=\"ex\">$</span> DERIVATION=<span class=\"st\">&quot;</span><span class=\"va\">$(</span><span class=\"ex\">nix</span> path-info <span class=\"at\">--derivation</span> <span class=\"st\">&quot;</span><span class=\"va\">${BUILD}</span><span class=\"st\">&quot;</span><span class=\"va\">)</span><span class=\"st\">&quot;</span></span><br><span id=\"cb18-7\"><a href=\"#cb18-7\" tabindex=\"-1\"></a></span><br><span id=\"cb18-8\"><a href=\"#cb18-8\" tabindex=\"-1\"></a><span class=\"ex\">$</span> DEPENDENCIES=<span class=\"er\">(</span><span class=\"va\">$(</span><span class=\"ex\">nix-store</span> <span class=\"at\">--query</span> <span class=\"at\">--requisites</span> <span class=\"at\">--include-outputs</span> <span class=\"st\">&quot;</span><span class=\"va\">${DERIVATION}</span><span class=\"st\">&quot;</span><span class=\"va\">)</span><span class=\"kw\">)</span></span><br><span id=\"cb18-9\"><a href=\"#cb18-9\" tabindex=\"-1\"></a></span><br><span id=\"cb18-10\"><a href=\"#cb18-10\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix store sign <span class=\"at\">--key-file</span> <span class=\"st\">&quot;</span><span class=\"va\">${KEY_FILE}</span><span class=\"st\">&quot;</span> <span class=\"at\">--recursive</span> <span class=\"st\">&quot;</span><span class=\"va\">${DEPENDENCIES</span><span class=\"op\">[@]</span><span class=\"va\">}</span><span class=\"st\">&quot;</span></span><br><span id=\"cb18-11\"><a href=\"#cb18-11\" tabindex=\"-1\"></a></span><br><span id=\"cb18-12\"><a href=\"#cb18-12\" tabindex=\"-1\"></a><span class=\"ex\">$</span> nix copy <span class=\"at\">--to</span> <span class=\"st\">&quot;</span><span class=\"va\">${CACHE}</span><span class=\"st\">&quot;</span> <span class=\"st\">&quot;</span><span class=\"va\">${DEPENDENCIES</span><span class=\"op\">[@]</span><span class=\"va\">}</span><span class=\"st\">&quot;</span></span></code></pre></div><p>The above code is simple and clear enough to illustrate the idea, but we’re going to make a few adjustments to make this code more robust.</p><p>Specifically, we’re going to:</p><ul><li><p>Change the code to support an array of build targets</p><p>i.e. <code>BUILDS</code> instead of <code>BUILD</code></p></li><li><p>Use <code>mapfile</code> instead of <code>($(…))</code> to create intermediate arrays</p><p>See: <a href=\"https://www.shellcheck.net/wiki/SC2207\"><code>SC2207</code></a></p></li><li><p>Use <code>xargs</code> to handle command line length limits</p></li></ul><p>… which gives us:</p><div class=\"sourceCode\" id=\"cb19\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb19-1\"><a href=\"#cb19-1\" tabindex=\"-1\"></a><span class=\"ex\">$</span> <span class=\"co\"># Optional: Perform the build if you haven't already</span></span><br><span id=\"cb19-2\"><a href=\"#cb19-2\" tabindex=\"-1\"></a><span class=\"ex\">$</span> echo <span class=\"st\">&quot;</span><span class=\"va\">${BUILDS</span><span class=\"op\">[@]</span><span class=\"va\">}</span><span class=\"st\">&quot;</span> <span class=\"kw\">|</span> <span class=\"fu\">xargs</span> nix build</span><br><span id=\"cb19-3\"><a href=\"#cb19-3\" tabindex=\"-1\"></a></span><br><span id=\"cb19-4\"><a href=\"#cb19-4\" tabindex=\"-1\"></a><span class=\"ex\">$</span> mapfile <span class=\"at\">-t</span> DERIVATIONS <span class=\"op\">&lt;</span> <span class=\"op\">&lt;(</span><span class=\"bu\">echo</span> <span class=\"st\">&quot;</span><span class=\"va\">${BUILDS</span><span class=\"op\">[@]</span><span class=\"va\">}</span><span class=\"st\">&quot;</span> <span class=\"kw\">|</span> <span class=\"fu\">xargs</span> nix path-info <span class=\"at\">--derivation</span><span class=\"op\">)</span></span><br><span id=\"cb19-5\"><a href=\"#cb19-5\" tabindex=\"-1\"></a></span><br><span id=\"cb19-6\"><a href=\"#cb19-6\" tabindex=\"-1\"></a><span class=\"ex\">$</span> mapfile <span class=\"at\">-t</span> DEPENDENCIES <span class=\"op\">&lt;</span> <span class=\"op\">&lt;(</span><span class=\"bu\">echo</span> <span class=\"st\">&quot;</span><span class=\"va\">${DERIVATIONS</span><span class=\"op\">[@]</span><span class=\"va\">}</span><span class=\"st\">&quot;</span> <span class=\"kw\">|</span> <span class=\"fu\">xargs</span> nix-store <span class=\"at\">--query</span> <span class=\"at\">--requisites</span> <span class=\"at\">--include-outputs</span><span class=\"op\">)</span></span><br><span id=\"cb19-7\"><a href=\"#cb19-7\" tabindex=\"-1\"></a></span><br><span id=\"cb19-8\"><a href=\"#cb19-8\" tabindex=\"-1\"></a><span class=\"ex\">$</span> echo <span class=\"st\">&quot;</span><span class=\"va\">${DEPENDENCIES</span><span class=\"op\">[@]</span><span class=\"va\">}</span><span class=\"st\">&quot;</span> <span class=\"kw\">|</span> <span class=\"fu\">xargs</span> nix store sign <span class=\"at\">--key-file</span> <span class=\"st\">&quot;</span><span class=\"va\">${KEY_FILE}</span><span class=\"st\">&quot;</span> <span class=\"at\">--recursive</span></span><br><span id=\"cb19-9\"><a href=\"#cb19-9\" tabindex=\"-1\"></a></span><br><span id=\"cb19-10\"><a href=\"#cb19-10\" tabindex=\"-1\"></a><span class=\"ex\">$</span> echo <span class=\"st\">&quot;</span><span class=\"va\">${DEPENDENCIES</span><span class=\"op\">[@]</span><span class=\"va\">}</span><span class=\"st\">&quot;</span> <span class=\"kw\">|</span> <span class=\"fu\">xargs</span> nix copy <span class=\"at\">--to</span> <span class=\"st\">&quot;</span><span class=\"va\">${CACHE}</span><span class=\"st\">&quot;</span></span></code></pre></div><p>… where you:</p><ul><li><p>replace <code>BUILDS</code> with a Bash array containing what you want to build</p><p>e.g. <code>.#example</code> or <code>nixpkgs#hello</code></p></li><li><p>replace <code>CACHE</code> with whatever store you use as your cache</p><p>e.g. <code>s3://cache.example.com</code></p></li><li><p>replace <code>KEY_FILE</code> with the path to your cache signing key</p></li></ul><h4 id=\"conclusion\">Conclusion</h4><p>That last script is the pedantically robust way to do this in Bash if you want to be super paranoid. The above script might not work in other shells, but hopefully this post was sufficiently clear that you can adapt the script to your needs.</p><p>If I made any mistakes in the above post, let me know and I can fix them.</p></body></html>"
}