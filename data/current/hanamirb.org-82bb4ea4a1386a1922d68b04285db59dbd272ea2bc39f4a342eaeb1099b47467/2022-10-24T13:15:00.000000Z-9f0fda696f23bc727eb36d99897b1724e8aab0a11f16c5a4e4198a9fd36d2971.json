{
  "title":"Announcing Hanami v2.0.0.beta4",
  "date":"2022-10-24T13:15:00.000000Z",
  "author":"Tim Riley",
  "id":"http://hanamirb.org/blog/2022/10/24/announcing-hanami-200beta4/",
  "link":"http://hanamirb.org/blog/2022/10/24/announcing-hanami-200beta4/",
  "content":"<p>Hello again, friends! We’re delighted to share the release of Hanami 2.0.0.beta4, the final release of our 2.0.0.beta series!</p>\n\n      <h2 id=\"improved-memory-performance-for-hanami-action\" class=\"title\"><a name=\"improved-memory-performance-for-hanami-action\" class=\"anchor\" href=\"#improved-memory-performance-for-hanami-action\">      \n</a>Improved memory performance for Hanami::Action</h2>\n    \n<p>Hanami::Action plays a key role in Hanami 2.0 apps, powering each of your HTTP endpoints. For this release we’ve made big improvements to the memory impact of subclassing Hanami::Action, with a memory reduction of over 5x for each subclass. This will help your Hanami apps retain a slim footprint even as they grow in size.</p>\n\n      <h2 id=\"simplified-body-parser-config\" class=\"title\"><a name=\"simplified-body-parser-config\" class=\"anchor\" href=\"#simplified-body-parser-config\">      \n</a>Simplified body parser config</h2>\n    \n<p>hanami-router’s body parsers are the middleware that parse incoming request bodies to turn them into Ruby structures that you can use within your actions. Now configuring a body parser has become easier than ever. No more requires or class names, just provide the name for your parser:</p>\n<div class=\"highlight\"><pre class=\"highlight ruby\"><code><span>module</span> <span>MyApp</span>\n  <span>class</span> <span>App</span> <span>&lt;</span> <span>Hanami</span><span>::</span><span>App</span>\n    <span>config</span><span>.</span><span>middleware</span><span>.</span><span>use</span> <span>:body_parser</span><span>,</span> <span>:json</span>\n  <span>end</span>\n<span>end</span>\n</code></pre></div>\n<p>You can now also specify custom action formats and matching body parser configuration both in the same place:</p>\n<div class=\"highlight\"><pre class=\"highlight ruby\"><code><span>module</span> <span>MyApp</span>\n  <span>class</span> <span>App</span> <span>&lt;</span> <span>Hanami</span><span>::</span><span>App</span>\n    <span>config</span><span>.</span><span>actions</span><span>.</span><span>format</span> <span>json: </span><span>&quot;application/json+scim&quot;</span>\n    <span>config</span><span>.</span><span>middleware</span><span>.</span><span>use</span> <span>:body_parser</span><span>,</span> <span>[</span><span>json: </span><span>&quot;application/json+scim&quot;</span><span>]</span>\n  <span>end</span>\n<span>end</span>\n</code></pre></div>\n      <h2 id=\"and-a-whole-lot-of-polish-\" class=\"title\"><a name=\"and-a-whole-lot-of-polish-\" class=\"anchor\" href=\"#and-a-whole-lot-of-polish-\">      \n</a>And a whole lot of polish!</h2>\n    \n<p>We’ve spent much of this release’s development cycle getting everything as tidy as possible. Here are a few highlights:</p>\n\n<ul>\n<li>Added helpful output and help messages to all <code>hanami</code> CLI commands</li>\n<li><code>hanami generate</code> now generates tests for slice-based components under <code>spec/slices/[slice_name]/</code></li>\n<li><code>Hanami::Settings</code> subclasses have a nested dry-types <code>Types</code> module auto-generated, for easy type-checking of settings: refer to <code>Types</code> inside your settings class and it’ll just work!</li>\n<li><code>Hanami::Settings#inspect</code> hides values to prevent leakage of sensitive data, with <code>#inspect_values</code> as a way to see everything</li>\n<li><code>request</code> and <code>response</code> objects inside Hanami::Action now share the same <code>session</code> and <code>flash</code> objects, ensuring all session changes are persisted regardless of how they’re made</li>\n<li>Accessing <code>session</code> and <code>flash</code> now raise a helpful error message if sessions are not configured</li>\n<li><code>Hanami.app.configuration</code> is now <code>.config</code>, to better reflect usage in natural language</li>\n</ul>\n\n      <h2 id=\"2-0-0-is-coming-\" class=\"title\"><a name=\"2-0-0-is-coming-\" class=\"anchor\" href=\"#2-0-0-is-coming-\">      \n</a>2.0.0 is coming!</h2>\n    \n<p>This is the very last of our betas! From here, we expect to make two more releases:</p>\n\n<ul>\n<li>A 2.0.0.rc1 release candidate in two weeks</li>\n<li>The final 2.0.0 release in another two weeks</li>\n</ul>\n\n<p>For these releases, we’ll be focused on minor bug fixes only, plus documentation and the 1.0 releases of our dry-rb gem dependencies. We’ll also be releasing a preview of our 2.0.0 user guide before the rc1 release.</p>\n\n<p>All of this means you can look forward to a 2.0.0 release towards the end of November!</p>\n\n<p>Between now and then, we need your help: please take the chance to test Hanami 2.0! Pull down this beta and give things a go, and let us know if you hit any issues.</p>\n\n      <h2 id=\"what-s-included-\" class=\"title\"><a name=\"what-s-included-\" class=\"anchor\" href=\"#what-s-included-\">      \n</a>What’s included?</h2>\n    \n<p>Today we’re releasing the following gems:</p>\n\n<ul>\n<li>hanami v2.0.0.beta4</li>\n<li>hanami-router v2.0.0.beta4</li>\n<li>hanami-controller v2.0.0.beta4</li>\n<li>hanami-cli v2.0.0.beta4</li>\n<li>hanami-reloader v1.0.0.beta4</li>\n<li>hanami-rspec v3.11.0.beta4 (it follows RSpec’s versioning)</li>\n</ul>\n\n<p>For specific changes in this beta release, please see each gem’s own CHANGELOG.</p>\n\n      <h2 id=\"how-can-i-try-it-\" class=\"title\"><a name=\"how-can-i-try-it-\" class=\"anchor\" href=\"#how-can-i-try-it-\">      \n</a>How can I try it?</h2>\n    <div class=\"highlight\"><pre class=\"highlight plaintext\"><code>⚡ gem install hanami --pre\n⚡ hanami new bookshelf\n⚡ cd bookshelf\n⚡ bundle exec hanami --help\n</code></pre></div>\n      <h2 id=\"contributors\" class=\"title\"><a name=\"contributors\" class=\"anchor\" href=\"#contributors\">      \n</a>Contributors</h2>\n    \n<p>Thank you to these fine people for contributing to this release!</p>\n\n<ul>\n<li><a href=\"https://github.com/waiting-for-dev\">Marc Busqué</a></li>\n<li><a href=\"https://github.com/cllns\">Sean Collins</a></li>\n<li><a href=\"https://github.com/jodosha\">Luca Guidi</a></li>\n<li><a href=\"https://github.com/tak1n\">Benjamin Klotz</a></li>\n<li><a href=\"https://github.com/timriley\">Tim Riley</a></li>\n<li><a href=\"https://github.com/solnic\">Peter Solnica</a></li>\n</ul>\n\n      <h2 id=\"thank-you\" class=\"title\"><a name=\"thank-you\" class=\"anchor\" href=\"#thank-you\">      \n</a>Thank you</h2>\n    \n<p>Thank you as always for supporting Hanami!</p>\n\n<p>We can’t wait to hear from you about this release, and we’re looking forward to sharing another update with you very soon. \uD83C\uDF38</p>\n"
}