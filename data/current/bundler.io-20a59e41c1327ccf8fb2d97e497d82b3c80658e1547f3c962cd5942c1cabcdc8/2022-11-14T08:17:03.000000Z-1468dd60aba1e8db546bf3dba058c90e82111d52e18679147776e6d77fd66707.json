{
  "title":"Bundler v2.2: Multiplatform, Funding, and more.",
  "date":"2022-11-14T08:17:03.000000Z",
  "author":"David Rodríguez",
  "id":"https://bundler.io/blog/2020/12/09/bundler-v2-2.html",
  "link":"https://bundler.io/blog/2020/12/09/bundler-v2-2.html",
  "content":"<p>After an intense year of work, we’re finally ready to announce the release of\nthe final version of bundler 2.2, right in time to be included with Christmas’\neve Ruby 3.0 release.</p>\n\n<h2 id=\"multiplatform-support\">Multiplatform support</h2>\n\n<p>Historically, bundler has had issues when it comes to choosing and prioritizing\nplatform specific versions of gems during resolution. With this release, we have\nmade several improvements in this regard and we expect to ship a much more user\nfriendly behavior here.</p>\n\n<p>Huge thanks to <a href=\"https://github.com/kou\">@kou</a> for contributing awesome fixes in\nthis area, and to <a href=\"https://github.com/larskanis\">@larskanis</a> for early testing\nthe improvements and giving us feedback.</p>\n\n<p>Bundler now needs to record the specific platform it used to resolve a given\n<code>Gemfile</code> in the lockfile, so you will notice some source control differences\nthere when you upgrade. Commit these changes for all your supported platforms to\nmake sure all developers of your application get a consistent resolution under\nall platforms.</p>\n\n<h2 id=\"find-out-about-gems-you-depend-on-that-need-funding\">Find out about gems you depend on that need funding</h2>\n\n<p>We really want to help building a more sustainable ruby ecosystem, so we’re\nshipping a new <code>bundle fund</code> command that helps you discovering the libraries\nyou depend on that need funding.</p>\n\n<p>If you develop a gem that needs funding, make sure you fill in the <code>funding_uri</code>\nmetadata in your gemspec, like this:</p>\n\n<div class=\"highlight\"><pre class=\"highlight ruby\"><code><span class=\"no\">Gem</span><span class=\"o\">::</span><span class=\"no\">Specification</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">gem</span><span class=\"o\">|</span>\n  <span class=\"n\">gem</span><span class=\"p\">.</span><span class=\"nf\">name</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;</span><span class=\"si\">#{</span><span class=\"no\">GEM_NAME</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span>\n  <span class=\"n\">gem</span><span class=\"p\">.</span><span class=\"nf\">homepage</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;</span><span class=\"si\">#{</span><span class=\"no\">GEM_HOMEPAGE</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span>\n  <span class=\"n\">s</span><span class=\"p\">.</span><span class=\"nf\">metadata</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"s2\">&quot;funding_uri&quot;</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">&quot;</span><span class=\"si\">#{</span><span class=\"no\">GEM_FUNDING_PAGE</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span>\n  <span class=\"p\">}</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n<p>As soon as people start filling this metadata, <code>bundle fund</code> will start\nreporting all of your dependencies that need funding.</p>\n\n<p>Big kudos to <a href=\"https://github.com/gjtorikian\">@gjtorikian</a> for coding this\nfeature both on the server and the client sides, and for waiting so patiently\nuntil we had time to review his work.</p>\n\n<p>And talking about funding, remember: <a href=\"https://rubytogether.org/\">RubyTogether</a> needs ❤️.</p>\n\n<h2 id=\"improved-windows-support\">Improved Windows support</h2>\n\n<p>Partly because of the improved multiplatform support, but also because of many\nother fixes, bundler now supports Windows much better. We even have a Windows CI\nrunning to make sure we minimize regressions under that platform.</p>\n\n<h2 id=\"better-integration-inside-ruby-core\">Better integration inside ruby-core</h2>\n\n<p>Since ruby 2.6 bundler is included as default gem with ruby. This change was\nexciting but didn’t happen without issues. We have made many fixes in this\nregard and we believe things should be much smoother now. As in, you shouldn’t\nnotice any behavioral difference at all when running bundler as a regular gem vs\nas a default gem.</p>\n\n<h2 id=\"better-support-for-jruby\">Better support for JRuby</h2>\n\n<p>We have been working on improving our compatibility with jruby as well. We now\nrun a small subset of our CI under jruby to prevent regressions and cover the\nrelated bug fixes that we ship.</p>\n\n<h2 id=\"better-more-flexible-gem-templates\">Better, more flexible, gem templates</h2>\n\n<p>We have shipped a lot of improvements to the default <code>bundle gem</code> template. You\ncan now automatically set up a configuration for the main CI providers, or\ninclude <code>rubocop</code> to check your code style, among other improvements. We also\nmake sure all gems are now generated with a default minimum supported ruby,\nwhich is a good practice that we really want to promote.</p>\n\n<h2 id=\"and-a-bunch-of-bug-fixes\">And a bunch of bug fixes!</h2>\n\n<p>Last but not least, we have fixed about 60 bugs in this release. Our main focus\nat the moment is stability, so we want to kill all those issues that sometimes\nmake bundler get in the middle.</p>\n\n<h2 id=\"how-to-get-it\">How to get it</h2>\n\n<p>Run <code>gem install bundler</code> to upgrade to the newest version of Bundler.</p>\n\n<hr>\n\n<p>That’s all for now. We really hope you enjoy this release. Happy Bundling!</p>\n"
}